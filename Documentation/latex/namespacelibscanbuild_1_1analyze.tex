\hypertarget{namespacelibscanbuild_1_1analyze}{}\doxysection{libscanbuild.\+analyze Namespace Reference}
\label{namespacelibscanbuild_1_1analyze}\index{libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae936eaf80eeb685aa31309e4220f9d34}{scan\+\_\+build}} ()
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a4890a077471300798e0dba6a92777185}{analyze\+\_\+build}} ()
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}{need\+\_\+analyzer}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\+\_\+with}} (constant, pieces)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}{get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+args}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aefbf8c32914e6957fc3c817938a50380}{get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+json}} (ctu\+\_\+conf\+\_\+json)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aeaeee7d4608a93d865e797c3f2fdf9c9}{create\+\_\+global\+\_\+ctu\+\_\+extdef\+\_\+map}} (extdef\+\_\+map\+\_\+lines)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}{merge\+\_\+ctu\+\_\+extdef\+\_\+maps}} (ctudir)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}{run\+\_\+analyzer\+\_\+parallel}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}{govern\+\_\+analyzer\+\_\+runs}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ad19f0ab8fa3cf72e2ec036f7d94f2cee}{setup\+\_\+environment}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5ff26413a4ea96456e628941c35d6a2e}{analyze\+\_\+compiler\+\_\+wrapper}} ()
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acefa7c45530ce05688972012172ed743}{analyze\+\_\+compiler\+\_\+wrapper\+\_\+impl}} (result, execution)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}{report\+\_\+directory}} (hint, keep, output\+\_\+format)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}{analyzer\+\_\+params}} (args)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a549c835dae0038a8679739773976f696}{require}} (required)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a505fccfeb836b113101687366a231f5f}{run}} (opts)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}{report\+\_\+failure}} (opts)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}{run\+\_\+analyzer}} (opts, continuation=\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}{report\+\_\+failure}})
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a8c0344dce632218625f617a4aa65ab26}{extdef\+\_\+map\+\_\+list\+\_\+src\+\_\+to\+\_\+ast}} (extdef\+\_\+src\+\_\+list)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af51d594675cc6ce01414c9eaa6aa9b1b}{ctu\+\_\+collect\+\_\+phase}} (opts)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}{dispatch\+\_\+ctu}} (opts, continuation=\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}{run\+\_\+analyzer}})
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}{filter\+\_\+debug\+\_\+flags}} (opts, continuation=\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}{dispatch\+\_\+ctu}})
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}{language\+\_\+check}} (opts, continuation=\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}{filter\+\_\+debug\+\_\+flags}})
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae904fd60725ff1fb90431b995a50faef}{arch\+\_\+check}} (opts, continuation=\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}{language\+\_\+check}})
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a88d630b78f7304bed2cf7dbedcf0c495}{classify\+\_\+parameters}} (command)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
string \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a465bf942eb92f47670cfbf42f3d3b492}{COMPILER\+\_\+\+WRAPPER\+\_\+\+CC}} = \textquotesingle{}analyze-\/cc\textquotesingle{}
\item 
string \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a093e4e01674825746c8dca2c3a0b3ad4}{COMPILER\+\_\+\+WRAPPER\+\_\+\+CXX}} = \textquotesingle{}analyze-\/c++\textquotesingle{}
\item 
string \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a60479fc2f65fd6f8fa70ece6a555a32d}{CTU\+\_\+\+EXTDEF\+\_\+\+MAP\+\_\+\+FILENAME}} = \textquotesingle{}external\+Def\+Map.\+txt\textquotesingle{}
\item 
string \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af69a2823a3919b8223b79278cec07fb3}{CTU\+\_\+\+TEMP\+\_\+\+DEFMAP\+\_\+\+FOLDER}} = \textquotesingle{}tmp\+External\+Def\+Maps\textquotesingle{}
\item 
dictionary \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ab246be544945b6a304ded48006891a91}{IGNORED\+\_\+\+FLAGS}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a4890a077471300798e0dba6a92777185}\label{namespacelibscanbuild_1_1analyze_a4890a077471300798e0dba6a92777185}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!analyze\_build@{analyze\_build}}
\index{analyze\_build@{analyze\_build}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{analyze\_build()}{analyze\_build()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+analyze\+\_\+build (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb} Entry point for analyze-build command. \end{DoxyVerb}
 

Definition at line 78 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{78 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a4890a077471300798e0dba6a92777185}{analyze\_build}}():}
\DoxyCodeLine{79     \textcolor{stringliteral}{"{}"{}"{} Entry point for analyze-\/build command. "{}"{}"{}}}
\DoxyCodeLine{80 }
\DoxyCodeLine{81     args = \mbox{\hyperlink{namespacelibscanbuild_1_1arguments_aa689de807ebb9310d2094c50a2d4f781}{parse\_args\_for\_analyze\_build}}()}
\DoxyCodeLine{82     \textcolor{comment}{\# will re-\/assign the report directory as new output}}
\DoxyCodeLine{83     \textcolor{keyword}{with} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}{report\_directory}}(args.output, args.keep\_empty, args.output\_format) \textcolor{keyword}{as} args.output:}
\DoxyCodeLine{84         \textcolor{comment}{\# Run the analyzer against a compilation db.}}
\DoxyCodeLine{85         \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}{govern\_analyzer\_runs}}(args)}
\DoxyCodeLine{86         \textcolor{comment}{\# Cover report generation and bug counting.}}
\DoxyCodeLine{87         number\_of\_bugs = \mbox{\hyperlink{namespacelibscanbuild_1_1report_aa904f76cf35a4ed932c596460fbcbbc8}{document}}(args)}
\DoxyCodeLine{88         \textcolor{comment}{\# Set exit status as it was requested.}}
\DoxyCodeLine{89         \textcolor{keywordflow}{return} number\_of\_bugs \textcolor{keywordflow}{if} args.status\_bugs \textcolor{keywordflow}{else} 0}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 }

\end{DoxyCode}


References libscanbuild.\+report.\+document(), libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs(), libscanbuild.\+arguments.\+parse\+\_\+args\+\_\+for\+\_\+analyze\+\_\+build(), and libscanbuild.\+analyze.\+report\+\_\+directory().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a5ff26413a4ea96456e628941c35d6a2e}\label{namespacelibscanbuild_1_1analyze_a5ff26413a4ea96456e628941c35d6a2e}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!analyze\_compiler\_wrapper@{analyze\_compiler\_wrapper}}
\index{analyze\_compiler\_wrapper@{analyze\_compiler\_wrapper}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{analyze\_compiler\_wrapper()}{analyze\_compiler\_wrapper()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+analyze\+\_\+compiler\+\_\+wrapper (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb} Entry point for `analyze-cc` and `analyze-c++` compiler wrappers. \end{DoxyVerb}
 

Definition at line 298 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{298 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5ff26413a4ea96456e628941c35d6a2e}{analyze\_compiler\_wrapper}}():}
\DoxyCodeLine{299     \textcolor{stringliteral}{"{}"{}"{} Entry point for `analyze-\/cc` and `analyze-\/c++` compiler wrappers. "{}"{}"{}}}
\DoxyCodeLine{300 }
\DoxyCodeLine{301     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacelibscanbuild_a395e584f9f6636d0f86868b62ef35780}{compiler\_wrapper}}(analyze\_compiler\_wrapper\_impl)}
\DoxyCodeLine{302 }
\DoxyCodeLine{303 }

\end{DoxyCode}


References libscanbuild.\+compiler\+\_\+wrapper().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_acefa7c45530ce05688972012172ed743}\label{namespacelibscanbuild_1_1analyze_acefa7c45530ce05688972012172ed743}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!analyze\_compiler\_wrapper\_impl@{analyze\_compiler\_wrapper\_impl}}
\index{analyze\_compiler\_wrapper\_impl@{analyze\_compiler\_wrapper\_impl}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{analyze\_compiler\_wrapper\_impl()}{analyze\_compiler\_wrapper\_impl()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+analyze\+\_\+compiler\+\_\+wrapper\+\_\+impl (\begin{DoxyParamCaption}\item[{}]{result,  }\item[{}]{execution }\end{DoxyParamCaption})}

\begin{DoxyVerb} Implements analyzer compiler wrapper functionality. \end{DoxyVerb}
 

Definition at line 304 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{304 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acefa7c45530ce05688972012172ed743}{analyze\_compiler\_wrapper\_impl}}(result, execution):}
\DoxyCodeLine{305     \textcolor{stringliteral}{"{}"{}"{} Implements analyzer compiler wrapper functionality. "{}"{}"{}}}
\DoxyCodeLine{306 }
\DoxyCodeLine{307     \textcolor{comment}{\# don't run analyzer when compilation fails. or when it's not requested.}}
\DoxyCodeLine{308     \textcolor{keywordflow}{if} result \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_CLANG'}):}
\DoxyCodeLine{309         \textcolor{keywordflow}{return}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311     \textcolor{comment}{\# check is it a compilation?}}
\DoxyCodeLine{312     compilation = \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_ae846942ed0e175486de0bbe3a258852c}{split\_command}}(execution.cmd)}
\DoxyCodeLine{313     \textcolor{keywordflow}{if} compilation \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{314         \textcolor{keywordflow}{return}}
\DoxyCodeLine{315     \textcolor{comment}{\# collect the needed parameters from environment, crash when missing}}
\DoxyCodeLine{316     parameters = \{}
\DoxyCodeLine{317         \textcolor{stringliteral}{'clang'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_CLANG'}),}
\DoxyCodeLine{318         \textcolor{stringliteral}{'output\_dir'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_DIR'}),}
\DoxyCodeLine{319         \textcolor{stringliteral}{'output\_format'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_FORMAT'}),}
\DoxyCodeLine{320         \textcolor{stringliteral}{'output\_failures'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_FAILURES'}),}
\DoxyCodeLine{321         \textcolor{stringliteral}{'direct\_args'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_PARAMETERS'},}
\DoxyCodeLine{322                                  \textcolor{stringliteral}{''}).split(\textcolor{stringliteral}{' '}),}
\DoxyCodeLine{323         \textcolor{stringliteral}{'force\_debug'}: os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_FORCE\_DEBUG'}),}
\DoxyCodeLine{324         \textcolor{stringliteral}{'directory'}: execution.cwd,}
\DoxyCodeLine{325         \textcolor{stringliteral}{'command'}: [execution.cmd[0], \textcolor{stringliteral}{'-\/c'}] + compilation.flags,}
\DoxyCodeLine{326         \textcolor{stringliteral}{'ctu'}: \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aefbf8c32914e6957fc3c817938a50380}{get\_ctu\_config\_from\_json}}(os.getenv(\textcolor{stringliteral}{'ANALYZE\_BUILD\_CTU'}))}
\DoxyCodeLine{327     \}}
\DoxyCodeLine{328     \textcolor{comment}{\# call static analyzer against the compilation}}
\DoxyCodeLine{329     \textcolor{keywordflow}{for} source \textcolor{keywordflow}{in} compilation.files:}
\DoxyCodeLine{330         parameters.update(\{\textcolor{stringliteral}{'file'}: source\})}
\DoxyCodeLine{331         logging.debug(\textcolor{stringliteral}{'analyzer parameters \%s'}, parameters)}
\DoxyCodeLine{332         current = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a505fccfeb836b113101687366a231f5f}{run}}(parameters)}
\DoxyCodeLine{333         \textcolor{comment}{\# display error message from the static analyzer}}
\DoxyCodeLine{334         \textcolor{keywordflow}{if} current \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{335             \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} current[\textcolor{stringliteral}{'error\_output'}]:}
\DoxyCodeLine{336                 logging.info(line.rstrip())}
\DoxyCodeLine{337 }
\DoxyCodeLine{338 }
\DoxyCodeLine{339 \textcolor{preprocessor}{@contextlib.contextmanager}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+json(), libscanbuild.\+analyze.\+run(), and libscanbuild.\+compilation.\+split\+\_\+command().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}\label{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!analyzer\_params@{analyzer\_params}}
\index{analyzer\_params@{analyzer\_params}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{analyzer\_params()}{analyzer\_params()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+analyzer\+\_\+params (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} A group of command line arguments can mapped to command
line arguments of the analyzer. This method generates those. \end{DoxyVerb}
 

Definition at line 379 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{379 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}{analyzer\_params}}(args):}
\DoxyCodeLine{380     \textcolor{stringliteral}{"{}"{}"{} A group of command line arguments can mapped to command}}
\DoxyCodeLine{381 \textcolor{stringliteral}{    line arguments of the analyzer. This method generates those. "{}"{}"{}}}
\DoxyCodeLine{382 }
\DoxyCodeLine{383     result = []}
\DoxyCodeLine{384 }
\DoxyCodeLine{385     \textcolor{keywordflow}{if} args.store\_model:}
\DoxyCodeLine{386         result.append(\textcolor{stringliteral}{'-\/analyzer-\/store=\{0\}'}.format(args.store\_model))}
\DoxyCodeLine{387     \textcolor{keywordflow}{if} args.constraints\_model:}
\DoxyCodeLine{388         result.append(\textcolor{stringliteral}{'-\/analyzer-\/constraints=\{0\}'}.format(}
\DoxyCodeLine{389             args.constraints\_model))}
\DoxyCodeLine{390     \textcolor{keywordflow}{if} args.internal\_stats:}
\DoxyCodeLine{391         result.append(\textcolor{stringliteral}{'-\/analyzer-\/stats'})}
\DoxyCodeLine{392     \textcolor{keywordflow}{if} args.analyze\_headers:}
\DoxyCodeLine{393         result.append(\textcolor{stringliteral}{'-\/analyzer-\/opt-\/analyze-\/headers'})}
\DoxyCodeLine{394     \textcolor{keywordflow}{if} args.stats:}
\DoxyCodeLine{395         result.append(\textcolor{stringliteral}{'-\/analyzer-\/checker=debug.Stats'})}
\DoxyCodeLine{396     \textcolor{keywordflow}{if} args.maxloop:}
\DoxyCodeLine{397         result.extend([\textcolor{stringliteral}{'-\/analyzer-\/max-\/loop'}, str(args.maxloop)])}
\DoxyCodeLine{398     \textcolor{keywordflow}{if} args.output\_format:}
\DoxyCodeLine{399         result.append(\textcolor{stringliteral}{'-\/analyzer-\/output=\{0\}'}.format(args.output\_format))}
\DoxyCodeLine{400     \textcolor{keywordflow}{if} args.analyzer\_config:}
\DoxyCodeLine{401         result.extend([\textcolor{stringliteral}{'-\/analyzer-\/config'}, args.analyzer\_config])}
\DoxyCodeLine{402     \textcolor{keywordflow}{if} args.verbose >= 4:}
\DoxyCodeLine{403         result.append(\textcolor{stringliteral}{'-\/analyzer-\/display-\/progress'})}
\DoxyCodeLine{404     \textcolor{keywordflow}{if} args.plugins:}
\DoxyCodeLine{405         result.extend(\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\_with}}(\textcolor{stringliteral}{'-\/load'}, args.plugins))}
\DoxyCodeLine{406     \textcolor{keywordflow}{if} args.enable\_checker:}
\DoxyCodeLine{407         checkers = \textcolor{stringliteral}{','}.join(args.enable\_checker)}
\DoxyCodeLine{408         result.extend([\textcolor{stringliteral}{'-\/analyzer-\/checker'}, checkers])}
\DoxyCodeLine{409     \textcolor{keywordflow}{if} args.disable\_checker:}
\DoxyCodeLine{410         checkers = \textcolor{stringliteral}{','}.join(args.disable\_checker)}
\DoxyCodeLine{411         result.extend([\textcolor{stringliteral}{'-\/analyzer-\/disable-\/checker'}, checkers])}
\DoxyCodeLine{412 }
\DoxyCodeLine{413     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\_with}}(\textcolor{stringliteral}{'-\/Xclang'}, result)}
\DoxyCodeLine{414 }
\DoxyCodeLine{415 }

\end{DoxyCode}


References libscanbuild.\+analyze.\+prefix\+\_\+with().



Referenced by libscanbuild.\+analyze.\+run\+\_\+analyzer\+\_\+parallel(), and libscanbuild.\+analyze.\+setup\+\_\+environment().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ae904fd60725ff1fb90431b995a50faef}\label{namespacelibscanbuild_1_1analyze_ae904fd60725ff1fb90431b995a50faef}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!arch\_check@{arch\_check}}
\index{arch\_check@{arch\_check}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{arch\_check()}{arch\_check()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+arch\+\_\+check (\begin{DoxyParamCaption}\item[{}]{opts,  }\item[{}]{continuation = {\ttfamily \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}{language\+\_\+check}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb} Do run analyzer through one of the given architectures. \end{DoxyVerb}
 

Definition at line 724 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{724 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae904fd60725ff1fb90431b995a50faef}{arch\_check}}(opts, continuation=language\_check):}
\DoxyCodeLine{725     \textcolor{stringliteral}{"{}"{}"{} Do run analyzer through one of the given architectures. "{}"{}"{}}}
\DoxyCodeLine{726 }
\DoxyCodeLine{727     disabled = frozenset(\{\textcolor{stringliteral}{'ppc'}, \textcolor{stringliteral}{'ppc64'}\})}
\DoxyCodeLine{728 }
\DoxyCodeLine{729     received\_list = opts.pop(\textcolor{stringliteral}{'arch\_list'})}
\DoxyCodeLine{730     \textcolor{keywordflow}{if} received\_list:}
\DoxyCodeLine{731         \textcolor{comment}{\# filter out disabled architectures and -\/arch switches}}
\DoxyCodeLine{732         filtered\_list = [a \textcolor{keywordflow}{for} a \textcolor{keywordflow}{in} received\_list \textcolor{keywordflow}{if} a \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} disabled]}
\DoxyCodeLine{733         \textcolor{keywordflow}{if} filtered\_list:}
\DoxyCodeLine{734             \textcolor{comment}{\# There should be only one arch given (or the same multiple}}
\DoxyCodeLine{735             \textcolor{comment}{\# times). If there are multiple arch are given and are not}}
\DoxyCodeLine{736             \textcolor{comment}{\# the same, those should not change the pre-\/processing step.}}
\DoxyCodeLine{737             \textcolor{comment}{\# But that's the only pass we have before run the analyzer.}}
\DoxyCodeLine{738             current = filtered\_list.pop()}
\DoxyCodeLine{739             logging.debug(\textcolor{stringliteral}{'analysis, on arch: \%s'}, current)}
\DoxyCodeLine{740 }
\DoxyCodeLine{741             opts.update(\{\textcolor{stringliteral}{'flags'}: [\textcolor{stringliteral}{'-\/arch'}, current] + opts[\textcolor{stringliteral}{'flags'}]\})}
\DoxyCodeLine{742             \textcolor{keywordflow}{return} continuation(opts)}
\DoxyCodeLine{743         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{744             logging.debug(\textcolor{stringliteral}{'skip analysis, found not supported arch'})}
\DoxyCodeLine{745             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{746     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{747         logging.debug(\textcolor{stringliteral}{'analysis, on default arch'})}
\DoxyCodeLine{748         \textcolor{keywordflow}{return} continuation(opts)}
\DoxyCodeLine{749 }
\DoxyCodeLine{750 }
\DoxyCodeLine{751 \textcolor{comment}{\# To have good results from static analyzer certain compiler options shall be}}
\DoxyCodeLine{752 \textcolor{comment}{\# omitted. The compiler flag filtering only affects the static analyzer run.}}
\DoxyCodeLine{753 \textcolor{comment}{\#}}
\DoxyCodeLine{754 \textcolor{comment}{\# Keys are the option name, value number of options to skip}}

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+language\+\_\+check(), and libscanbuild.\+analyze.\+run().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a88d630b78f7304bed2cf7dbedcf0c495}\label{namespacelibscanbuild_1_1analyze_a88d630b78f7304bed2cf7dbedcf0c495}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!classify\_parameters@{classify\_parameters}}
\index{classify\_parameters@{classify\_parameters}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{classify\_parameters()}{classify\_parameters()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+classify\+\_\+parameters (\begin{DoxyParamCaption}\item[{}]{command }\end{DoxyParamCaption})}

\begin{DoxyVerb} Prepare compiler flags (filters some and add others) and take out
language (-x) and architecture (-arch) flags for future processing. \end{DoxyVerb}
 

Definition at line 777 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{777 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a88d630b78f7304bed2cf7dbedcf0c495}{classify\_parameters}}(command):}
\DoxyCodeLine{778     \textcolor{stringliteral}{"{}"{}"{} Prepare compiler flags (filters some and add others) and take out}}
\DoxyCodeLine{779 \textcolor{stringliteral}{    language (-\/x) and architecture (-\/arch) flags for future processing. "{}"{}"{}}}
\DoxyCodeLine{780 }
\DoxyCodeLine{781     result = \{}
\DoxyCodeLine{782         \textcolor{stringliteral}{'flags'}: [],  \textcolor{comment}{\# the filtered compiler flags}}
\DoxyCodeLine{783         \textcolor{stringliteral}{'arch\_list'}: [],  \textcolor{comment}{\# list of architecture flags}}
\DoxyCodeLine{784         \textcolor{stringliteral}{'language'}: \textcolor{keywordtype}{None},  \textcolor{comment}{\# compilation language, None, if not specified}}
\DoxyCodeLine{785         \textcolor{stringliteral}{'compiler'}: \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}{compiler\_language}}(command)  \textcolor{comment}{\# 'c' or 'c++'}}
\DoxyCodeLine{786     \}}
\DoxyCodeLine{787 }
\DoxyCodeLine{788     \textcolor{comment}{\# iterate on the compile options}}
\DoxyCodeLine{789     args = iter(command[1:])}
\DoxyCodeLine{790     \textcolor{keywordflow}{for} arg \textcolor{keywordflow}{in} args:}
\DoxyCodeLine{791         \textcolor{comment}{\# take arch flags into a separate basket}}
\DoxyCodeLine{792         \textcolor{keywordflow}{if} arg == \textcolor{stringliteral}{'-\/arch'}:}
\DoxyCodeLine{793             result[\textcolor{stringliteral}{'arch\_list'}].append(next(args))}
\DoxyCodeLine{794         \textcolor{comment}{\# take language}}
\DoxyCodeLine{795         \textcolor{keywordflow}{elif} arg == \textcolor{stringliteral}{'-\/x'}:}
\DoxyCodeLine{796             result[\textcolor{stringliteral}{'language'}] = next(args)}
\DoxyCodeLine{797         \textcolor{comment}{\# parameters which looks source file are not flags}}
\DoxyCodeLine{798         \textcolor{keywordflow}{elif} re.match(\textcolor{stringliteral}{r'\string^[\string^-\/].+'}, arg) \textcolor{keywordflow}{and} \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}{classify\_source}}(arg):}
\DoxyCodeLine{799             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{800         \textcolor{comment}{\# ignore some flags}}
\DoxyCodeLine{801         \textcolor{keywordflow}{elif} arg \textcolor{keywordflow}{in} IGNORED\_FLAGS:}
\DoxyCodeLine{802             count = IGNORED\_FLAGS[arg]}
\DoxyCodeLine{803             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(count):}
\DoxyCodeLine{804                 next(args)}
\DoxyCodeLine{805         \textcolor{comment}{\# we don't care about extra warnings, but we should suppress ones}}
\DoxyCodeLine{806         \textcolor{comment}{\# that we don't want to see.}}
\DoxyCodeLine{807         \textcolor{keywordflow}{elif} re.match(\textcolor{stringliteral}{r'\string^-\/W.+'}, arg) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} re.match(\textcolor{stringliteral}{r'\string^-\/Wno-\/.+'}, arg):}
\DoxyCodeLine{808             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{809         \textcolor{comment}{\# and consider everything else as compilation flag.}}
\DoxyCodeLine{810         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{811             result[\textcolor{stringliteral}{'flags'}].append(arg)}
\DoxyCodeLine{812 }
\DoxyCodeLine{813     \textcolor{keywordflow}{return} result}

\end{DoxyCode}


References libscanbuild.\+compilation.\+classify\+\_\+source(), and libscanbuild.\+compilation.\+compiler\+\_\+language().



Referenced by libscanbuild.\+analyze.\+run().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_aeaeee7d4608a93d865e797c3f2fdf9c9}\label{namespacelibscanbuild_1_1analyze_aeaeee7d4608a93d865e797c3f2fdf9c9}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!create\_global\_ctu\_extdef\_map@{create\_global\_ctu\_extdef\_map}}
\index{create\_global\_ctu\_extdef\_map@{create\_global\_ctu\_extdef\_map}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{create\_global\_ctu\_extdef\_map()}{create\_global\_ctu\_extdef\_map()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+create\+\_\+global\+\_\+ctu\+\_\+extdef\+\_\+map (\begin{DoxyParamCaption}\item[{}]{extdef\+\_\+map\+\_\+lines }\end{DoxyParamCaption})}

\begin{DoxyVerb} Takes iterator of individual external definition maps and creates a
global map keeping only unique names. We leave conflicting names out of
CTU.

:param extdef_map_lines: Contains the id of a definition (mangled name) and
the originating source (the corresponding AST file) name.
:type extdef_map_lines: Iterator of str.
:returns: Mangled name - AST file pairs.
:rtype: List of (str, str) tuples.
\end{DoxyVerb}
 

Definition at line 137 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{137 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aeaeee7d4608a93d865e797c3f2fdf9c9}{create\_global\_ctu\_extdef\_map}}(extdef\_map\_lines):}
\DoxyCodeLine{138     \textcolor{stringliteral}{"{}"{}"{} Takes iterator of individual external definition maps and creates a}}
\DoxyCodeLine{139 \textcolor{stringliteral}{    global map keeping only unique names. We leave conflicting names out of}}
\DoxyCodeLine{140 \textcolor{stringliteral}{    CTU.}}
\DoxyCodeLine{141 \textcolor{stringliteral}{}}
\DoxyCodeLine{142 \textcolor{stringliteral}{    :param extdef\_map\_lines: Contains the id of a definition (mangled name) and}}
\DoxyCodeLine{143 \textcolor{stringliteral}{    the originating source (the corresponding AST file) name.}}
\DoxyCodeLine{144 \textcolor{stringliteral}{    :type extdef\_map\_lines: Iterator of str.}}
\DoxyCodeLine{145 \textcolor{stringliteral}{    :returns: Mangled name -\/ AST file pairs.}}
\DoxyCodeLine{146 \textcolor{stringliteral}{    :rtype: List of (str, str) tuples.}}
\DoxyCodeLine{147 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     mangled\_to\_asts = defaultdict(set)}
\DoxyCodeLine{150 }
\DoxyCodeLine{151     \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} extdef\_map\_lines:}
\DoxyCodeLine{152         mangled\_name, ast\_file = line.strip().split(\textcolor{stringliteral}{' '}, 1)}
\DoxyCodeLine{153         mangled\_to\_asts[mangled\_name].add(ast\_file)}
\DoxyCodeLine{154 }
\DoxyCodeLine{155     mangled\_ast\_pairs = []}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \textcolor{keywordflow}{for} mangled\_name, ast\_files \textcolor{keywordflow}{in} mangled\_to\_asts.items():}
\DoxyCodeLine{158         \textcolor{keywordflow}{if} len(ast\_files) == 1:}
\DoxyCodeLine{159             mangled\_ast\_pairs.append((mangled\_name, next(iter(ast\_files))))}
\DoxyCodeLine{160 }
\DoxyCodeLine{161     \textcolor{keywordflow}{return} mangled\_ast\_pairs}
\DoxyCodeLine{162 }
\DoxyCodeLine{163 }

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+merge\+\_\+ctu\+\_\+extdef\+\_\+maps().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_af51d594675cc6ce01414c9eaa6aa9b1b}\label{namespacelibscanbuild_1_1analyze_af51d594675cc6ce01414c9eaa6aa9b1b}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!ctu\_collect\_phase@{ctu\_collect\_phase}}
\index{ctu\_collect\_phase@{ctu\_collect\_phase}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{ctu\_collect\_phase()}{ctu\_collect\_phase()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+ctu\+\_\+collect\+\_\+phase (\begin{DoxyParamCaption}\item[{}]{opts }\end{DoxyParamCaption})}

\begin{DoxyVerb} Preprocess source by generating all data needed by CTU analysis. \end{DoxyVerb}
 

Definition at line 597 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{597 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af51d594675cc6ce01414c9eaa6aa9b1b}{ctu\_collect\_phase}}(opts):}
\DoxyCodeLine{598     \textcolor{stringliteral}{"{}"{}"{} Preprocess source by generating all data needed by CTU analysis. "{}"{}"{}}}
\DoxyCodeLine{599 }
\DoxyCodeLine{600     \textcolor{keyword}{def }generate\_ast(triple\_arch):}
\DoxyCodeLine{601         \textcolor{stringliteral}{"{}"{}"{} Generates ASTs for the current compilation command. "{}"{}"{}}}
\DoxyCodeLine{602 }
\DoxyCodeLine{603         args = opts[\textcolor{stringliteral}{'direct\_args'}] + opts[\textcolor{stringliteral}{'flags'}]}
\DoxyCodeLine{604         ast\_joined\_path = os.path.join(opts[\textcolor{stringliteral}{'ctu'}].dir, triple\_arch, \textcolor{stringliteral}{'ast'},}
\DoxyCodeLine{605                                        os.path.realpath(opts[\textcolor{stringliteral}{'file'}])[1:] +}
\DoxyCodeLine{606                                        \textcolor{stringliteral}{'.ast'})}
\DoxyCodeLine{607         ast\_path = os.path.abspath(ast\_joined\_path)}
\DoxyCodeLine{608         ast\_dir = os.path.dirname(ast\_path)}
\DoxyCodeLine{609         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(ast\_dir):}
\DoxyCodeLine{610             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{611                 os.makedirs(ast\_dir)}
\DoxyCodeLine{612             \textcolor{keywordflow}{except} OSError:}
\DoxyCodeLine{613                 \textcolor{comment}{\# In case an other process already created it.}}
\DoxyCodeLine{614                 \textcolor{keywordflow}{pass}}
\DoxyCodeLine{615         ast\_command = [opts[\textcolor{stringliteral}{'clang'}], \textcolor{stringliteral}{'-\/emit-\/ast'}]}
\DoxyCodeLine{616         ast\_command.extend(args)}
\DoxyCodeLine{617         ast\_command.append(\textcolor{stringliteral}{'-\/w'})}
\DoxyCodeLine{618         ast\_command.append(opts[\textcolor{stringliteral}{'file'}])}
\DoxyCodeLine{619         ast\_command.append(\textcolor{stringliteral}{'-\/o'})}
\DoxyCodeLine{620         ast\_command.append(ast\_path)}
\DoxyCodeLine{621         logging.debug(\textcolor{stringliteral}{"{}Generating AST using '\%s'"{}}, ast\_command)}
\DoxyCodeLine{622         \mbox{\hyperlink{namespacelibscanbuild_a243b8757d8cfbc0be023301a8b951d6c}{run\_command}}(ast\_command, cwd=opts[\textcolor{stringliteral}{'directory'}])}
\DoxyCodeLine{623 }
\DoxyCodeLine{624     \textcolor{keyword}{def }map\_extdefs(triple\_arch):}
\DoxyCodeLine{625         \textcolor{stringliteral}{"{}"{}"{} Generate external definition map file for the current source. "{}"{}"{}}}
\DoxyCodeLine{626 }
\DoxyCodeLine{627         args = opts[\textcolor{stringliteral}{'direct\_args'}] + opts[\textcolor{stringliteral}{'flags'}]}
\DoxyCodeLine{628         extdefmap\_command = [opts[\textcolor{stringliteral}{'ctu'}].extdef\_map\_cmd]}
\DoxyCodeLine{629         extdefmap\_command.append(opts[\textcolor{stringliteral}{'file'}])}
\DoxyCodeLine{630         extdefmap\_command.append(\textcolor{stringliteral}{'-\/-\/'})}
\DoxyCodeLine{631         extdefmap\_command.extend(args)}
\DoxyCodeLine{632         logging.debug(\textcolor{stringliteral}{"{}Generating external definition map using '\%s'"{}},}
\DoxyCodeLine{633                       extdefmap\_command)}
\DoxyCodeLine{634         extdef\_src\_list = \mbox{\hyperlink{namespacelibscanbuild_a243b8757d8cfbc0be023301a8b951d6c}{run\_command}}(extdefmap\_command, cwd=opts[\textcolor{stringliteral}{'directory'}])}
\DoxyCodeLine{635         extdef\_ast\_list = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a8c0344dce632218625f617a4aa65ab26}{extdef\_map\_list\_src\_to\_ast}}(extdef\_src\_list)}
\DoxyCodeLine{636         extern\_defs\_map\_folder = os.path.join(opts[\textcolor{stringliteral}{'ctu'}].dir, triple\_arch,}
\DoxyCodeLine{637                                              CTU\_TEMP\_DEFMAP\_FOLDER)}
\DoxyCodeLine{638         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(extern\_defs\_map\_folder):}
\DoxyCodeLine{639             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{640                 os.makedirs(extern\_defs\_map\_folder)}
\DoxyCodeLine{641             \textcolor{keywordflow}{except} OSError:}
\DoxyCodeLine{642                 \textcolor{comment}{\# In case an other process already created it.}}
\DoxyCodeLine{643                 \textcolor{keywordflow}{pass}}
\DoxyCodeLine{644         \textcolor{keywordflow}{if} extdef\_ast\_list:}
\DoxyCodeLine{645             \textcolor{keyword}{with} tempfile.NamedTemporaryFile(mode=\textcolor{stringliteral}{'w'},}
\DoxyCodeLine{646                                              dir=extern\_defs\_map\_folder,}
\DoxyCodeLine{647                                              delete=\textcolor{keyword}{False}) \textcolor{keyword}{as} out\_file:}
\DoxyCodeLine{648                 out\_file.write(\textcolor{stringliteral}{"{}\(\backslash\)n"{}}.join(extdef\_ast\_list) + \textcolor{stringliteral}{"{}\(\backslash\)n"{}})}
\DoxyCodeLine{649 }
\DoxyCodeLine{650     cwd = opts[\textcolor{stringliteral}{'directory'}]}
\DoxyCodeLine{651     cmd = [opts[\textcolor{stringliteral}{'clang'}], \textcolor{stringliteral}{'-\/-\/analyze'}] + opts[\textcolor{stringliteral}{'direct\_args'}] + opts[\textcolor{stringliteral}{'flags'}] \(\backslash\)}
\DoxyCodeLine{652         + [opts[\textcolor{stringliteral}{'file'}]]}
\DoxyCodeLine{653     triple\_arch = \mbox{\hyperlink{namespacelibscanbuild_1_1clang_af91327b127fdb63a9c81a3d8d03d5149}{get\_triple\_arch}}(cmd, cwd)}
\DoxyCodeLine{654     generate\_ast(triple\_arch)}
\DoxyCodeLine{655     map\_extdefs(triple\_arch)}
\DoxyCodeLine{656 }
\DoxyCodeLine{657 }
\DoxyCodeLine{658 \textcolor{preprocessor}{@require(['ctu'])}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+dispatch\+\_\+ctu(), libscanbuild.\+analyze.\+extdef\+\_\+map\+\_\+list\+\_\+src\+\_\+to\+\_\+ast(), libscanbuild.\+clang.\+get\+\_\+triple\+\_\+arch(), and libscanbuild.\+run\+\_\+command().



Referenced by libscanbuild.\+analyze.\+dispatch\+\_\+ctu(), and libscanbuild.\+analyze.\+extdef\+\_\+map\+\_\+list\+\_\+src\+\_\+to\+\_\+ast().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}\label{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!dispatch\_ctu@{dispatch\_ctu}}
\index{dispatch\_ctu@{dispatch\_ctu}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{dispatch\_ctu()}{dispatch\_ctu()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+dispatch\+\_\+ctu (\begin{DoxyParamCaption}\item[{}]{opts,  }\item[{}]{continuation = {\ttfamily \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}{run\+\_\+analyzer}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb} Execute only one phase of 2 phases of CTU if needed. \end{DoxyVerb}
 

Definition at line 659 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{659 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}{dispatch\_ctu}}(opts, continuation=run\_analyzer):}
\DoxyCodeLine{660     \textcolor{stringliteral}{"{}"{}"{} Execute only one phase of 2 phases of CTU if needed. "{}"{}"{}}}
\DoxyCodeLine{661 }
\DoxyCodeLine{662     ctu\_config = opts[\textcolor{stringliteral}{'ctu'}]}
\DoxyCodeLine{663 }
\DoxyCodeLine{664     \textcolor{keywordflow}{if} ctu\_config.collect \textcolor{keywordflow}{or} ctu\_config.analyze:}
\DoxyCodeLine{665         \textcolor{keyword}{assert} ctu\_config.collect != ctu\_config.analyze}
\DoxyCodeLine{666         \textcolor{keywordflow}{if} ctu\_config.collect:}
\DoxyCodeLine{667             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af51d594675cc6ce01414c9eaa6aa9b1b}{ctu\_collect\_phase}}(opts)}
\DoxyCodeLine{668         \textcolor{keywordflow}{if} ctu\_config.analyze:}
\DoxyCodeLine{669             cwd = opts[\textcolor{stringliteral}{'directory'}]}
\DoxyCodeLine{670             cmd = [opts[\textcolor{stringliteral}{'clang'}], \textcolor{stringliteral}{'-\/-\/analyze'}] + opts[\textcolor{stringliteral}{'direct\_args'}] \(\backslash\)}
\DoxyCodeLine{671                 + opts[\textcolor{stringliteral}{'flags'}] + [opts[\textcolor{stringliteral}{'file'}]]}
\DoxyCodeLine{672             triarch = \mbox{\hyperlink{namespacelibscanbuild_1_1clang_af91327b127fdb63a9c81a3d8d03d5149}{get\_triple\_arch}}(cmd, cwd)}
\DoxyCodeLine{673             ctu\_options = [\textcolor{stringliteral}{'ctu-\/dir='} + os.path.join(ctu\_config.dir, triarch),}
\DoxyCodeLine{674                            \textcolor{stringliteral}{'experimental-\/enable-\/naive-\/ctu-\/analysis=true'}]}
\DoxyCodeLine{675             analyzer\_options = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\_with}}(\textcolor{stringliteral}{'-\/analyzer-\/config'}, ctu\_options)}
\DoxyCodeLine{676             direct\_options = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\_with}}(\textcolor{stringliteral}{'-\/Xanalyzer'}, analyzer\_options)}
\DoxyCodeLine{677             opts[\textcolor{stringliteral}{'direct\_args'}].extend(direct\_options)}
\DoxyCodeLine{678 }
\DoxyCodeLine{679     \textcolor{keywordflow}{return} continuation(opts)}
\DoxyCodeLine{680 }
\DoxyCodeLine{681 }
\DoxyCodeLine{682 \textcolor{preprocessor}{@require(['flags', 'force\_debug'])}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+ctu\+\_\+collect\+\_\+phase(), libscanbuild.\+analyze.\+filter\+\_\+debug\+\_\+flags(), libscanbuild.\+clang.\+get\+\_\+triple\+\_\+arch(), and libscanbuild.\+analyze.\+prefix\+\_\+with().



Referenced by libscanbuild.\+analyze.\+ctu\+\_\+collect\+\_\+phase().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a8c0344dce632218625f617a4aa65ab26}\label{namespacelibscanbuild_1_1analyze_a8c0344dce632218625f617a4aa65ab26}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!extdef\_map\_list\_src\_to\_ast@{extdef\_map\_list\_src\_to\_ast}}
\index{extdef\_map\_list\_src\_to\_ast@{extdef\_map\_list\_src\_to\_ast}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{extdef\_map\_list\_src\_to\_ast()}{extdef\_map\_list\_src\_to\_ast()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+extdef\+\_\+map\+\_\+list\+\_\+src\+\_\+to\+\_\+ast (\begin{DoxyParamCaption}\item[{}]{extdef\+\_\+src\+\_\+list }\end{DoxyParamCaption})}

\begin{DoxyVerb} Turns textual external definition map list with source files into an
external definition map list with ast files. \end{DoxyVerb}
 

Definition at line 580 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{580 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a8c0344dce632218625f617a4aa65ab26}{extdef\_map\_list\_src\_to\_ast}}(extdef\_src\_list):}
\DoxyCodeLine{581     \textcolor{stringliteral}{"{}"{}"{} Turns textual external definition map list with source files into an}}
\DoxyCodeLine{582 \textcolor{stringliteral}{    external definition map list with ast files. "{}"{}"{}}}
\DoxyCodeLine{583 }
\DoxyCodeLine{584     extdef\_ast\_list = []}
\DoxyCodeLine{585     \textcolor{keywordflow}{for} extdef\_src\_txt \textcolor{keywordflow}{in} extdef\_src\_list:}
\DoxyCodeLine{586         mangled\_name, path = extdef\_src\_txt.split(\textcolor{stringliteral}{"{} "{}}, 1)}
\DoxyCodeLine{587         \textcolor{comment}{\# Normalize path on windows as well}}
\DoxyCodeLine{588         path = os.path.splitdrive(path)[1]}
\DoxyCodeLine{589         \textcolor{comment}{\# Make relative path out of absolute}}
\DoxyCodeLine{590         path = path[1:] \textcolor{keywordflow}{if} path[0] == os.sep \textcolor{keywordflow}{else} path}
\DoxyCodeLine{591         ast\_path = os.path.join(\textcolor{stringliteral}{"{}ast"{}}, path + \textcolor{stringliteral}{"{}.ast"{}})}
\DoxyCodeLine{592         extdef\_ast\_list.append(mangled\_name + \textcolor{stringliteral}{"{} "{}} + ast\_path)}
\DoxyCodeLine{593     \textcolor{keywordflow}{return} extdef\_ast\_list}
\DoxyCodeLine{594 }
\DoxyCodeLine{595 }
\DoxyCodeLine{596 \textcolor{preprocessor}{@require(['clang', 'directory', 'flags', 'direct\_args', 'file', 'ctu'])}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+ctu\+\_\+collect\+\_\+phase().



Referenced by libscanbuild.\+analyze.\+ctu\+\_\+collect\+\_\+phase(), and libscanbuild.\+analyze.\+run\+\_\+analyzer().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}\label{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!filter\_debug\_flags@{filter\_debug\_flags}}
\index{filter\_debug\_flags@{filter\_debug\_flags}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{filter\_debug\_flags()}{filter\_debug\_flags()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+filter\+\_\+debug\+\_\+flags (\begin{DoxyParamCaption}\item[{}]{opts,  }\item[{}]{continuation = {\ttfamily \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a3210ccc436bd8926927258fa9de1a2fb}{dispatch\+\_\+ctu}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb} Filter out nondebug macros when requested. \end{DoxyVerb}
 

Definition at line 683 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{683 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}{filter\_debug\_flags}}(opts, continuation=dispatch\_ctu):}
\DoxyCodeLine{684     \textcolor{stringliteral}{"{}"{}"{} Filter out nondebug macros when requested. "{}"{}"{}}}
\DoxyCodeLine{685 }
\DoxyCodeLine{686     \textcolor{keywordflow}{if} opts.pop(\textcolor{stringliteral}{'force\_debug'}):}
\DoxyCodeLine{687         \textcolor{comment}{\# lazy implementation just append an undefine macro at the end}}
\DoxyCodeLine{688         opts.update(\{\textcolor{stringliteral}{'flags'}: opts[\textcolor{stringliteral}{'flags'}] + [\textcolor{stringliteral}{'-\/UNDEBUG'}]\})}
\DoxyCodeLine{689 }
\DoxyCodeLine{690     \textcolor{keywordflow}{return} continuation(opts)}
\DoxyCodeLine{691 }
\DoxyCodeLine{692 }
\DoxyCodeLine{693 \textcolor{preprocessor}{@require(['language', 'compiler', 'file', 'flags'])}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+language\+\_\+check().



Referenced by libscanbuild.\+analyze.\+dispatch\+\_\+ctu().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}\label{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!get\_ctu\_config\_from\_args@{get\_ctu\_config\_from\_args}}
\index{get\_ctu\_config\_from\_args@{get\_ctu\_config\_from\_args}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{get\_ctu\_config\_from\_args()}{get\_ctu\_config\_from\_args()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+args (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} CTU configuration is created from the chosen phases and dir. \end{DoxyVerb}
 

Definition at line 114 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{114 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}{get\_ctu\_config\_from\_args}}(args):}
\DoxyCodeLine{115     \textcolor{stringliteral}{"{}"{}"{} CTU configuration is created from the chosen phases and dir. "{}"{}"{}}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \textcolor{keywordflow}{return} (}
\DoxyCodeLine{118         \mbox{\hyperlink{namespacelibscanbuild_ad6862a74d972673d22f1478908e7544e}{CtuConfig}}(collect=args.ctu\_phases.collect,}
\DoxyCodeLine{119                   analyze=args.ctu\_phases.analyze,}
\DoxyCodeLine{120                   dir=args.ctu\_dir,}
\DoxyCodeLine{121                   extdef\_map\_cmd=args.extdef\_map\_cmd)}
\DoxyCodeLine{122         \textcolor{keywordflow}{if} hasattr(args, \textcolor{stringliteral}{'ctu\_phases'}) \textcolor{keywordflow}{and} hasattr(args.ctu\_phases, \textcolor{stringliteral}{'dir'})}
\DoxyCodeLine{123         \textcolor{keywordflow}{else} \mbox{\hyperlink{namespacelibscanbuild_ad6862a74d972673d22f1478908e7544e}{CtuConfig}}(collect=\textcolor{keyword}{False}, analyze=\textcolor{keyword}{False}, dir=\textcolor{stringliteral}{''}, extdef\_map\_cmd=\textcolor{stringliteral}{''}))}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 }

\end{DoxyCode}


References libscanbuild.\+Ctu\+Config.



Referenced by libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs(), libscanbuild.\+analyze.\+run\+\_\+analyzer\+\_\+parallel(), and libscanbuild.\+analyze.\+setup\+\_\+environment().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_aefbf8c32914e6957fc3c817938a50380}\label{namespacelibscanbuild_1_1analyze_aefbf8c32914e6957fc3c817938a50380}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!get\_ctu\_config\_from\_json@{get\_ctu\_config\_from\_json}}
\index{get\_ctu\_config\_from\_json@{get\_ctu\_config\_from\_json}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{get\_ctu\_config\_from\_json()}{get\_ctu\_config\_from\_json()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+json (\begin{DoxyParamCaption}\item[{}]{ctu\+\_\+conf\+\_\+json }\end{DoxyParamCaption})}

\begin{DoxyVerb} CTU configuration is created from the chosen phases and dir. \end{DoxyVerb}
 

Definition at line 126 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{126 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aefbf8c32914e6957fc3c817938a50380}{get\_ctu\_config\_from\_json}}(ctu\_conf\_json):}
\DoxyCodeLine{127     \textcolor{stringliteral}{"{}"{}"{} CTU configuration is created from the chosen phases and dir. "{}"{}"{}}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     ctu\_config = json.loads(ctu\_conf\_json)}
\DoxyCodeLine{130     \textcolor{comment}{\# Recover namedtuple from json when coming from analyze-\/cc or analyze-\/c++}}
\DoxyCodeLine{131     \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacelibscanbuild_ad6862a74d972673d22f1478908e7544e}{CtuConfig}}(collect=ctu\_config[0],}
\DoxyCodeLine{132                      analyze=ctu\_config[1],}
\DoxyCodeLine{133                      dir=ctu\_config[2],}
\DoxyCodeLine{134                      extdef\_map\_cmd=ctu\_config[3])}
\DoxyCodeLine{135 }
\DoxyCodeLine{136 }

\end{DoxyCode}


References libscanbuild.\+Ctu\+Config.



Referenced by libscanbuild.\+analyze.\+analyze\+\_\+compiler\+\_\+wrapper\+\_\+impl().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}\label{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!govern\_analyzer\_runs@{govern\_analyzer\_runs}}
\index{govern\_analyzer\_runs@{govern\_analyzer\_runs}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{govern\_analyzer\_runs()}{govern\_analyzer\_runs()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} Governs multiple runs in CTU mode or runs once in normal mode. \end{DoxyVerb}
 

Definition at line 246 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{246 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}{govern\_analyzer\_runs}}(args):}
\DoxyCodeLine{247     \textcolor{stringliteral}{"{}"{}"{} Governs multiple runs in CTU mode or runs once in normal mode. "{}"{}"{}}}
\DoxyCodeLine{248 }
\DoxyCodeLine{249     ctu\_config = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}{get\_ctu\_config\_from\_args}}(args)}
\DoxyCodeLine{250     \textcolor{comment}{\# If we do a CTU collect (1st phase) we remove all previous collection}}
\DoxyCodeLine{251     \textcolor{comment}{\# data first.}}
\DoxyCodeLine{252     \textcolor{keywordflow}{if} ctu\_config.collect:}
\DoxyCodeLine{253         shutil.rmtree(ctu\_config.dir, ignore\_errors=\textcolor{keyword}{True})}
\DoxyCodeLine{254 }
\DoxyCodeLine{255     \textcolor{comment}{\# If the user asked for a collect (1st) and analyze (2nd) phase, we do an}}
\DoxyCodeLine{256     \textcolor{comment}{\# all-\/in-\/one run where we deliberately remove collection data before and}}
\DoxyCodeLine{257     \textcolor{comment}{\# also after the run. If the user asks only for a single phase data is}}
\DoxyCodeLine{258     \textcolor{comment}{\# left so multiple analyze runs can use the same data gathered by a single}}
\DoxyCodeLine{259     \textcolor{comment}{\# collection run.}}
\DoxyCodeLine{260     \textcolor{keywordflow}{if} ctu\_config.collect \textcolor{keywordflow}{and} ctu\_config.analyze:}
\DoxyCodeLine{261         \textcolor{comment}{\# CTU strings are coming from args.ctu\_dir and extdef\_map\_cmd,}}
\DoxyCodeLine{262         \textcolor{comment}{\# so we can leave it empty}}
\DoxyCodeLine{263         args.ctu\_phases = \mbox{\hyperlink{namespacelibscanbuild_ad6862a74d972673d22f1478908e7544e}{CtuConfig}}(collect=\textcolor{keyword}{True}, analyze=\textcolor{keyword}{False},}
\DoxyCodeLine{264                                     dir=\textcolor{stringliteral}{''}, extdef\_map\_cmd=\textcolor{stringliteral}{''})}
\DoxyCodeLine{265         \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}{run\_analyzer\_parallel}}(args)}
\DoxyCodeLine{266         \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}{merge\_ctu\_extdef\_maps}}(ctu\_config.dir)}
\DoxyCodeLine{267         args.ctu\_phases = \mbox{\hyperlink{namespacelibscanbuild_ad6862a74d972673d22f1478908e7544e}{CtuConfig}}(collect=\textcolor{keyword}{False}, analyze=\textcolor{keyword}{True},}
\DoxyCodeLine{268                                     dir=\textcolor{stringliteral}{''}, extdef\_map\_cmd=\textcolor{stringliteral}{''})}
\DoxyCodeLine{269         \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}{run\_analyzer\_parallel}}(args)}
\DoxyCodeLine{270         shutil.rmtree(ctu\_config.dir, ignore\_errors=\textcolor{keyword}{True})}
\DoxyCodeLine{271     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{272         \textcolor{comment}{\# Single runs (collect or analyze) are launched from here.}}
\DoxyCodeLine{273         \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}{run\_analyzer\_parallel}}(args)}
\DoxyCodeLine{274         \textcolor{keywordflow}{if} ctu\_config.collect:}
\DoxyCodeLine{275             \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}{merge\_ctu\_extdef\_maps}}(ctu\_config.dir)}
\DoxyCodeLine{276 }
\DoxyCodeLine{277 }

\end{DoxyCode}


References libscanbuild.\+Ctu\+Config, libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+args(), libscanbuild.\+analyze.\+merge\+\_\+ctu\+\_\+extdef\+\_\+maps(), and libscanbuild.\+analyze.\+run\+\_\+analyzer\+\_\+parallel().



Referenced by libscanbuild.\+analyze.\+analyze\+\_\+build(), and libscanbuild.\+analyze.\+scan\+\_\+build().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}\label{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!language\_check@{language\_check}}
\index{language\_check@{language\_check}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{language\_check()}{language\_check()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+language\+\_\+check (\begin{DoxyParamCaption}\item[{}]{opts,  }\item[{}]{continuation = {\ttfamily \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aea9e81f4024a9845dfc90ebff7126107}{filter\+\_\+debug\+\_\+flags}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb} Find out the language from command line parameters or file name
extension. The decision also influenced by the compiler invocation. \end{DoxyVerb}
 

Definition at line 694 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{694 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aebba13a0eaf395bb217502fb313f5254}{language\_check}}(opts, continuation=filter\_debug\_flags):}
\DoxyCodeLine{695     \textcolor{stringliteral}{"{}"{}"{} Find out the language from command line parameters or file name}}
\DoxyCodeLine{696 \textcolor{stringliteral}{    extension. The decision also influenced by the compiler invocation. "{}"{}"{}}}
\DoxyCodeLine{697 }
\DoxyCodeLine{698     accepted = frozenset(\{}
\DoxyCodeLine{699         \textcolor{stringliteral}{'c'}, \textcolor{stringliteral}{'c++'}, \textcolor{stringliteral}{'objective-\/c'}, \textcolor{stringliteral}{'objective-\/c++'}, \textcolor{stringliteral}{'c-\/cpp-\/output'},}
\DoxyCodeLine{700         \textcolor{stringliteral}{'c++-\/cpp-\/output'}, \textcolor{stringliteral}{'objective-\/c-\/cpp-\/output'}}
\DoxyCodeLine{701     \})}
\DoxyCodeLine{702 }
\DoxyCodeLine{703     \textcolor{comment}{\# language can be given as a parameter...}}
\DoxyCodeLine{704     language = opts.pop(\textcolor{stringliteral}{'language'})}
\DoxyCodeLine{705     compiler = opts.pop(\textcolor{stringliteral}{'compiler'})}
\DoxyCodeLine{706     \textcolor{comment}{\# ... or find out from source file extension}}
\DoxyCodeLine{707     \textcolor{keywordflow}{if} language \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} compiler \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{708         language = \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}{classify\_source}}(opts[\textcolor{stringliteral}{'file'}], compiler == \textcolor{stringliteral}{'c'})}
\DoxyCodeLine{709 }
\DoxyCodeLine{710     \textcolor{keywordflow}{if} language \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{711         logging.debug(\textcolor{stringliteral}{'skip analysis, language not known'})}
\DoxyCodeLine{712         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{713     \textcolor{keywordflow}{elif} language \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} accepted:}
\DoxyCodeLine{714         logging.debug(\textcolor{stringliteral}{'skip analysis, language not supported'})}
\DoxyCodeLine{715         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{716     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{717         logging.debug(\textcolor{stringliteral}{'analysis, language: \%s'}, language)}
\DoxyCodeLine{718         opts.update(\{\textcolor{stringliteral}{'language'}: language,}
\DoxyCodeLine{719                      \textcolor{stringliteral}{'flags'}: [\textcolor{stringliteral}{'-\/x'}, language] + opts[\textcolor{stringliteral}{'flags'}]\})}
\DoxyCodeLine{720         \textcolor{keywordflow}{return} continuation(opts)}
\DoxyCodeLine{721 }
\DoxyCodeLine{722 }
\DoxyCodeLine{723 \textcolor{preprocessor}{@require(['arch\_list', 'flags'])}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+arch\+\_\+check(), and libscanbuild.\+compilation.\+classify\+\_\+source().



Referenced by libscanbuild.\+analyze.\+filter\+\_\+debug\+\_\+flags().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}\label{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!merge\_ctu\_extdef\_maps@{merge\_ctu\_extdef\_maps}}
\index{merge\_ctu\_extdef\_maps@{merge\_ctu\_extdef\_maps}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{merge\_ctu\_extdef\_maps()}{merge\_ctu\_extdef\_maps()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+merge\+\_\+ctu\+\_\+extdef\+\_\+maps (\begin{DoxyParamCaption}\item[{}]{ctudir }\end{DoxyParamCaption})}

\begin{DoxyVerb} Merge individual external definition maps into a global one.

As the collect phase runs parallel on multiple threads, all compilation
units are separately mapped into a temporary file in CTU_TEMP_DEFMAP_FOLDER.
These definition maps contain the mangled names and the source
(AST generated from the source) which had their definition.
These files should be merged at the end into a global map file:
CTU_EXTDEF_MAP_FILENAME.\end{DoxyVerb}
 

Definition at line 164 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{164 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a5e3263c80b8029b2f2d0db3a29677db7}{merge\_ctu\_extdef\_maps}}(ctudir):}
\DoxyCodeLine{165     \textcolor{stringliteral}{"{}"{}"{} Merge individual external definition maps into a global one.}}
\DoxyCodeLine{166 \textcolor{stringliteral}{}}
\DoxyCodeLine{167 \textcolor{stringliteral}{    As the collect phase runs parallel on multiple threads, all compilation}}
\DoxyCodeLine{168 \textcolor{stringliteral}{    units are separately mapped into a temporary file in CTU\_TEMP\_DEFMAP\_FOLDER.}}
\DoxyCodeLine{169 \textcolor{stringliteral}{    These definition maps contain the mangled names and the source}}
\DoxyCodeLine{170 \textcolor{stringliteral}{    (AST generated from the source) which had their definition.}}
\DoxyCodeLine{171 \textcolor{stringliteral}{    These files should be merged at the end into a global map file:}}
\DoxyCodeLine{172 \textcolor{stringliteral}{    CTU\_EXTDEF\_MAP\_FILENAME."{}"{}"{}}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \textcolor{keyword}{def }generate\_extdef\_map\_lines(extdefmap\_dir):}
\DoxyCodeLine{175         \textcolor{stringliteral}{"{}"{}"{} Iterate over all lines of input files in a determined order. "{}"{}"{}}}
\DoxyCodeLine{176 }
\DoxyCodeLine{177         files = glob.glob(os.path.join(extdefmap\_dir, \textcolor{stringliteral}{'*'}))}
\DoxyCodeLine{178         files.sort()}
\DoxyCodeLine{179         \textcolor{keywordflow}{for} filename \textcolor{keywordflow}{in} files:}
\DoxyCodeLine{180             \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(filename, \textcolor{stringliteral}{'r'}) \textcolor{keyword}{as} in\_file:}
\DoxyCodeLine{181                 \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} in\_file:}
\DoxyCodeLine{182                     \textcolor{keywordflow}{yield} line}
\DoxyCodeLine{183 }
\DoxyCodeLine{184     \textcolor{keyword}{def }write\_global\_map(arch, mangled\_ast\_pairs):}
\DoxyCodeLine{185         \textcolor{stringliteral}{"{}"{}"{} Write (mangled name, ast file) pairs into final file. "{}"{}"{}}}
\DoxyCodeLine{186 }
\DoxyCodeLine{187         extern\_defs\_map\_file = os.path.join(ctudir, arch,}
\DoxyCodeLine{188                                            CTU\_EXTDEF\_MAP\_FILENAME)}
\DoxyCodeLine{189         \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(extern\_defs\_map\_file, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} out\_file:}
\DoxyCodeLine{190             \textcolor{keywordflow}{for} mangled\_name, ast\_file \textcolor{keywordflow}{in} mangled\_ast\_pairs:}
\DoxyCodeLine{191                 out\_file.write(\textcolor{stringliteral}{'\%s \%s\(\backslash\)n'} \% (mangled\_name, ast\_file))}
\DoxyCodeLine{192 }
\DoxyCodeLine{193     triple\_arches = glob.glob(os.path.join(ctudir, \textcolor{stringliteral}{'*'}))}
\DoxyCodeLine{194     \textcolor{keywordflow}{for} triple\_path \textcolor{keywordflow}{in} triple\_arches:}
\DoxyCodeLine{195         \textcolor{keywordflow}{if} os.path.isdir(triple\_path):}
\DoxyCodeLine{196             triple\_arch = os.path.basename(triple\_path)}
\DoxyCodeLine{197             extdefmap\_dir = os.path.join(ctudir, triple\_arch,}
\DoxyCodeLine{198                                      CTU\_TEMP\_DEFMAP\_FOLDER)}
\DoxyCodeLine{199 }
\DoxyCodeLine{200             extdef\_map\_lines = generate\_extdef\_map\_lines(extdefmap\_dir)}
\DoxyCodeLine{201             mangled\_ast\_pairs = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_aeaeee7d4608a93d865e797c3f2fdf9c9}{create\_global\_ctu\_extdef\_map}}(extdef\_map\_lines)}
\DoxyCodeLine{202             write\_global\_map(triple\_arch, mangled\_ast\_pairs)}
\DoxyCodeLine{203 }
\DoxyCodeLine{204             \textcolor{comment}{\# Remove all temporary files}}
\DoxyCodeLine{205             shutil.rmtree(extdefmap\_dir, ignore\_errors=\textcolor{keyword}{True})}
\DoxyCodeLine{206 }
\DoxyCodeLine{207 }

\end{DoxyCode}


References libscanbuild.\+analyze.\+create\+\_\+global\+\_\+ctu\+\_\+extdef\+\_\+map(), and startfile.\+open().



Referenced by libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}\label{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!need\_analyzer@{need\_analyzer}}
\index{need\_analyzer@{need\_analyzer}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{need\_analyzer()}{need\_analyzer()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+need\+\_\+analyzer (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} Check the intent of the build command.

When static analyzer run against project configure step, it should be
silent and no need to run the analyzer or generate report.

To run `scan-build` against the configure step might be necessary,
when compiler wrappers are used. That's the moment when build setup
check the compiler and capture the location for the build process. \end{DoxyVerb}
 

Definition at line 92 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{92 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}{need\_analyzer}}(args):}
\DoxyCodeLine{93     \textcolor{stringliteral}{"{}"{}"{} Check the intent of the build command.}}
\DoxyCodeLine{94 \textcolor{stringliteral}{}}
\DoxyCodeLine{95 \textcolor{stringliteral}{    When static analyzer run against project configure step, it should be}}
\DoxyCodeLine{96 \textcolor{stringliteral}{    silent and no need to run the analyzer or generate report.}}
\DoxyCodeLine{97 \textcolor{stringliteral}{}}
\DoxyCodeLine{98 \textcolor{stringliteral}{    To run `scan-\/build` against the configure step might be necessary,}}
\DoxyCodeLine{99 \textcolor{stringliteral}{    when compiler wrappers are used. That's the moment when build setup}}
\DoxyCodeLine{100 \textcolor{stringliteral}{    check the compiler and capture the location for the build process. "{}"{}"{}}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \textcolor{keywordflow}{return} len(args) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} re.search(\textcolor{stringliteral}{r'configure|autogen'}, args[0])}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 }

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+scan\+\_\+build(), and libscanbuild.\+analyze.\+setup\+\_\+environment().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}\label{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!prefix\_with@{prefix\_with}}
\index{prefix\_with@{prefix\_with}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{prefix\_with()}{prefix\_with()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+prefix\+\_\+with (\begin{DoxyParamCaption}\item[{}]{constant,  }\item[{}]{pieces }\end{DoxyParamCaption})}

\begin{DoxyVerb} From a sequence create another sequence where every second element
is from the original sequence and the odd elements are the prefix.

eg.: prefix_with(0, [1,2,3]) creates [0, 1, 0, 2, 0, 3] \end{DoxyVerb}
 

Definition at line 105 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{105 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae8b395a86eacb56d96109622c9470389}{prefix\_with}}(constant, pieces):}
\DoxyCodeLine{106     \textcolor{stringliteral}{"{}"{}"{} From a sequence create another sequence where every second element}}
\DoxyCodeLine{107 \textcolor{stringliteral}{    is from the original sequence and the odd elements are the prefix.}}
\DoxyCodeLine{108 \textcolor{stringliteral}{}}
\DoxyCodeLine{109 \textcolor{stringliteral}{    eg.: prefix\_with(0, [1,2,3]) creates [0, 1, 0, 2, 0, 3] "{}"{}"{}}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keywordflow}{return} [elem \textcolor{keywordflow}{for} piece \textcolor{keywordflow}{in} pieces \textcolor{keywordflow}{for} elem \textcolor{keywordflow}{in} [constant, piece]]}
\DoxyCodeLine{112 }
\DoxyCodeLine{113 }

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+analyzer\+\_\+params(), and libscanbuild.\+analyze.\+dispatch\+\_\+ctu().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}\label{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!report\_directory@{report\_directory}}
\index{report\_directory@{report\_directory}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{report\_directory()}{report\_directory()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+report\+\_\+directory (\begin{DoxyParamCaption}\item[{}]{hint,  }\item[{}]{keep,  }\item[{}]{output\+\_\+format }\end{DoxyParamCaption})}

\begin{DoxyVerb} Responsible for the report directory.

hint -- could specify the parent directory of the output directory.
keep -- a boolean value to keep or delete the empty report directory. \end{DoxyVerb}
 

Definition at line 340 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{340 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}{report\_directory}}(hint, keep, output\_format):}
\DoxyCodeLine{341     \textcolor{stringliteral}{"{}"{}"{} Responsible for the report directory.}}
\DoxyCodeLine{342 \textcolor{stringliteral}{}}
\DoxyCodeLine{343 \textcolor{stringliteral}{    hint -\/-\/ could specify the parent directory of the output directory.}}
\DoxyCodeLine{344 \textcolor{stringliteral}{    keep -\/-\/ a boolean value to keep or delete the empty report directory. "{}"{}"{}}}
\DoxyCodeLine{345 }
\DoxyCodeLine{346     stamp\_format = \textcolor{stringliteral}{'scan-\/build-\/\%Y-\/\%m-\/\%d-\/\%H-\/\%M-\/\%S-\/\%f-\/'}}
\DoxyCodeLine{347     stamp = datetime.datetime.now().strftime(stamp\_format)}
\DoxyCodeLine{348     parent\_dir = os.path.abspath(hint)}
\DoxyCodeLine{349     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(parent\_dir):}
\DoxyCodeLine{350         os.makedirs(parent\_dir)}
\DoxyCodeLine{351     name = tempfile.mkdtemp(prefix=stamp, dir=parent\_dir)}
\DoxyCodeLine{352 }
\DoxyCodeLine{353     logging.info(\textcolor{stringliteral}{'Report directory created: \%s'}, name)}
\DoxyCodeLine{354 }
\DoxyCodeLine{355     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{356         \textcolor{keywordflow}{yield} name}
\DoxyCodeLine{357     \textcolor{keywordflow}{finally}:}
\DoxyCodeLine{358         \textcolor{keywordflow}{if} os.listdir(name):}
\DoxyCodeLine{359             \textcolor{keywordflow}{if} output\_format \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} [\textcolor{stringliteral}{'sarif'}, \textcolor{stringliteral}{'sarif-\/html'}]: \textcolor{comment}{\# FIXME:}}
\DoxyCodeLine{360                 \textcolor{comment}{\# 'scan-\/view' currently does not support sarif format.}}
\DoxyCodeLine{361                 msg = \textcolor{stringliteral}{"{}Run 'scan-\/view \%s' to examine bug reports."{}}}
\DoxyCodeLine{362             \textcolor{keywordflow}{elif} output\_format == \textcolor{stringliteral}{'sarif-\/html'}:}
\DoxyCodeLine{363                 msg = \textcolor{stringliteral}{"{}Run 'scan-\/view \%s' to examine bug reports or see "{}} \(\backslash\)}
\DoxyCodeLine{364                     \textcolor{stringliteral}{"{}merged sarif results at \%s/results-\/merged.sarif."{}}}
\DoxyCodeLine{365             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{366                 msg = \textcolor{stringliteral}{"{}View merged sarif results at \%s/results-\/merged.sarif."{}}}
\DoxyCodeLine{367             keep = \textcolor{keyword}{True}}
\DoxyCodeLine{368         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{369             \textcolor{keywordflow}{if} keep:}
\DoxyCodeLine{370                 msg = \textcolor{stringliteral}{"{}Report directory '\%s' contains no report, but kept."{}}}
\DoxyCodeLine{371             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{372                 msg = \textcolor{stringliteral}{"{}Removing directory '\%s' because it contains no report."{}}}
\DoxyCodeLine{373         logging.warning(msg, name)}
\DoxyCodeLine{374 }
\DoxyCodeLine{375         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} keep:}
\DoxyCodeLine{376             os.rmdir(name)}
\DoxyCodeLine{377 }
\DoxyCodeLine{378 }

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+analyze\+\_\+build(), and libscanbuild.\+analyze.\+scan\+\_\+build().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}\label{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!report\_failure@{report\_failure}}
\index{report\_failure@{report\_failure}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{report\_failure()}{report\_failure()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+report\+\_\+failure (\begin{DoxyParamCaption}\item[{}]{opts }\end{DoxyParamCaption})}

\begin{DoxyVerb} Create report when analyzer failed.

The major report is the preprocessor output. The output filename generated
randomly. The compiler output also captured into '.stderr.txt' file.
And some more execution context also saved into '.info.txt' file. \end{DoxyVerb}
 

Definition at line 474 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{474 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}{report\_failure}}(opts):}
\DoxyCodeLine{475     \textcolor{stringliteral}{"{}"{}"{} Create report when analyzer failed.}}
\DoxyCodeLine{476 \textcolor{stringliteral}{}}
\DoxyCodeLine{477 \textcolor{stringliteral}{    The major report is the preprocessor output. The output filename generated}}
\DoxyCodeLine{478 \textcolor{stringliteral}{    randomly. The compiler output also captured into '.stderr.txt' file.}}
\DoxyCodeLine{479 \textcolor{stringliteral}{    And some more execution context also saved into '.info.txt' file. "{}"{}"{}}}
\DoxyCodeLine{480 }
\DoxyCodeLine{481     \textcolor{keyword}{def }extension():}
\DoxyCodeLine{482         \textcolor{stringliteral}{"{}"{}"{} Generate preprocessor file extension. "{}"{}"{}}}
\DoxyCodeLine{483 }
\DoxyCodeLine{484         mapping = \{\textcolor{stringliteral}{'objective-\/c++'}: \textcolor{stringliteral}{'.mii'}, \textcolor{stringliteral}{'objective-\/c'}: \textcolor{stringliteral}{'.mi'}, \textcolor{stringliteral}{'c++'}: \textcolor{stringliteral}{'.ii'}\}}
\DoxyCodeLine{485         \textcolor{keywordflow}{return} mapping.get(opts[\textcolor{stringliteral}{'language'}], \textcolor{stringliteral}{'.i'})}
\DoxyCodeLine{486 }
\DoxyCodeLine{487     \textcolor{keyword}{def }destination():}
\DoxyCodeLine{488         \textcolor{stringliteral}{"{}"{}"{} Creates failures directory if not exits yet. "{}"{}"{}}}
\DoxyCodeLine{489 }
\DoxyCodeLine{490         failures\_dir = os.path.join(opts[\textcolor{stringliteral}{'output\_dir'}], \textcolor{stringliteral}{'failures'})}
\DoxyCodeLine{491         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(failures\_dir):}
\DoxyCodeLine{492             os.makedirs(failures\_dir)}
\DoxyCodeLine{493         \textcolor{keywordflow}{return} failures\_dir}
\DoxyCodeLine{494 }
\DoxyCodeLine{495     \textcolor{comment}{\# Classify error type: when Clang terminated by a signal it's a 'Crash'.}}
\DoxyCodeLine{496     \textcolor{comment}{\# (python subprocess Popen.returncode is negative when child terminated}}
\DoxyCodeLine{497     \textcolor{comment}{\# by signal.) Everything else is 'Other Error'.}}
\DoxyCodeLine{498     error = \textcolor{stringliteral}{'crash'} \textcolor{keywordflow}{if} opts[\textcolor{stringliteral}{'exit\_code'}] < 0 \textcolor{keywordflow}{else} \textcolor{stringliteral}{'other\_error'}}
\DoxyCodeLine{499     \textcolor{comment}{\# Create preprocessor output file name. (This is blindly following the}}
\DoxyCodeLine{500     \textcolor{comment}{\# Perl implementation.)}}
\DoxyCodeLine{501     (handle, name) = tempfile.mkstemp(suffix=extension(),}
\DoxyCodeLine{502                                       prefix=\textcolor{stringliteral}{'clang\_'} + error + \textcolor{stringliteral}{'\_'},}
\DoxyCodeLine{503                                       dir=destination())}
\DoxyCodeLine{504     os.close(handle)}
\DoxyCodeLine{505     \textcolor{comment}{\# Execute Clang again, but run the syntax check only.}}
\DoxyCodeLine{506     cwd = opts[\textcolor{stringliteral}{'directory'}]}
\DoxyCodeLine{507     cmd = [opts[\textcolor{stringliteral}{'clang'}], \textcolor{stringliteral}{'-\/fsyntax-\/only'}, \textcolor{stringliteral}{'-\/E'}] + opts[\textcolor{stringliteral}{'flags'}] + \(\backslash\)}
\DoxyCodeLine{508         [opts[\textcolor{stringliteral}{'file'}], \textcolor{stringliteral}{'-\/o'}, name]}
\DoxyCodeLine{509     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{510         cmd = \mbox{\hyperlink{namespacelibscanbuild_1_1clang_aceaa1fcd710247641672c50964398c2a}{get\_arguments}}(cmd, cwd)}
\DoxyCodeLine{511         \mbox{\hyperlink{namespacelibscanbuild_a243b8757d8cfbc0be023301a8b951d6c}{run\_command}}(cmd, cwd=cwd)}
\DoxyCodeLine{512     \textcolor{keywordflow}{except} subprocess.CalledProcessError:}
\DoxyCodeLine{513         \textcolor{keywordflow}{pass}}
\DoxyCodeLine{514     \textcolor{keywordflow}{except} ClangErrorException:}
\DoxyCodeLine{515         \textcolor{keywordflow}{pass}}
\DoxyCodeLine{516     \textcolor{comment}{\# write general information about the crash}}
\DoxyCodeLine{517     \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(name + \textcolor{stringliteral}{'.info.txt'}, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} handle:}
\DoxyCodeLine{518         handle.write(opts[\textcolor{stringliteral}{'file'}] + os.linesep)}
\DoxyCodeLine{519         handle.write(error.title().replace(\textcolor{stringliteral}{'\_'}, \textcolor{stringliteral}{' '}) + os.linesep)}
\DoxyCodeLine{520         handle.write(\textcolor{stringliteral}{' '}.join(cmd) + os.linesep)}
\DoxyCodeLine{521         handle.write(\textcolor{stringliteral}{' '}.join(os.uname()) + os.linesep)}
\DoxyCodeLine{522         handle.write(\mbox{\hyperlink{namespacelibscanbuild_1_1clang_ac38809d624aaefe00fff85b0bfa1005f}{get\_version}}(opts[\textcolor{stringliteral}{'clang'}]))}
\DoxyCodeLine{523         handle.close()}
\DoxyCodeLine{524     \textcolor{comment}{\# write the captured output too}}
\DoxyCodeLine{525     \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(name + \textcolor{stringliteral}{'.stderr.txt'}, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} handle:}
\DoxyCodeLine{526         handle.writelines(opts[\textcolor{stringliteral}{'error\_output'}])}
\DoxyCodeLine{527         handle.close()}
\DoxyCodeLine{528 }
\DoxyCodeLine{529 }
\DoxyCodeLine{530 \textcolor{preprocessor}{@require(['clang', 'directory', 'flags', 'direct\_args', 'file', 'output\_dir',
          'output\_format'])}}
\DoxyCodeLine{531 }
\end{DoxyCode}


References libscanbuild.\+clang.\+get\+\_\+arguments(), libscanbuild.\+clang.\+get\+\_\+version(), startfile.\+open(), libscanbuild.\+analyze.\+run\+\_\+analyzer(), and libscanbuild.\+run\+\_\+command().



Referenced by libscanbuild.\+analyze.\+run().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a549c835dae0038a8679739773976f696}\label{namespacelibscanbuild_1_1analyze_a549c835dae0038a8679739773976f696}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!require@{require}}
\index{require@{require}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{require()}{require()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+require (\begin{DoxyParamCaption}\item[{}]{required }\end{DoxyParamCaption})}

\begin{DoxyVerb} Decorator for checking the required values in state.

It checks the required attributes in the passed state and stop when
any of those is missing. \end{DoxyVerb}
 

Definition at line 416 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{416 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a549c835dae0038a8679739773976f696}{require}}(required):}
\DoxyCodeLine{417     \textcolor{stringliteral}{"{}"{}"{} Decorator for checking the required values in state.}}
\DoxyCodeLine{418 \textcolor{stringliteral}{}}
\DoxyCodeLine{419 \textcolor{stringliteral}{    It checks the required attributes in the passed state and stop when}}
\DoxyCodeLine{420 \textcolor{stringliteral}{    any of those is missing. "{}"{}"{}}}
\DoxyCodeLine{421 }
\DoxyCodeLine{422     \textcolor{keyword}{def }decorator(function):}
\DoxyCodeLine{423         \textcolor{preprocessor}{@functools.wraps(function)}}
\DoxyCodeLine{424         \textcolor{keyword}{def }wrapper(*args, **kwargs):}
\DoxyCodeLine{425             \textcolor{keywordflow}{for} key \textcolor{keywordflow}{in} required:}
\DoxyCodeLine{426                 \textcolor{keywordflow}{if} key \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} args[0]:}
\DoxyCodeLine{427                     \textcolor{keywordflow}{raise} KeyError(\textcolor{stringliteral}{'\{0\} not passed to \{1\}'}.format(}
\DoxyCodeLine{428                         key, function.\_\_name\_\_))}
\DoxyCodeLine{429 }
\DoxyCodeLine{430             \textcolor{keywordflow}{return} function(*args, **kwargs)}
\DoxyCodeLine{431 }
\DoxyCodeLine{432         \textcolor{keywordflow}{return} wrapper}
\DoxyCodeLine{433 }
\DoxyCodeLine{434     \textcolor{keywordflow}{return} decorator}
\DoxyCodeLine{435 }
\DoxyCodeLine{436 }
\DoxyCodeLine{437 \textcolor{preprocessor}{@require(['command',  \# entry from compilation database
          'directory',  \# entry from compilation database
          'file',  \# entry from compilation database
          'clang',  \# clang executable name (and path)}}
\DoxyCodeLine{438           \textcolor{stringliteral}{'direct\_args'},  \textcolor{comment}{\# arguments from command line}}
\DoxyCodeLine{439           \textcolor{stringliteral}{'force\_debug'},  \textcolor{comment}{\# kill non debug macros}}
\DoxyCodeLine{440           \textcolor{stringliteral}{'output\_dir'},  \textcolor{comment}{\# where generated report files shall go}}
\DoxyCodeLine{441           \textcolor{stringliteral}{'output\_format'},  \textcolor{comment}{\# it's 'plist', 'html', 'plist-\/html', 'plist-\/multi-\/file', 'sarif', or 'sarif-\/html'}}
\DoxyCodeLine{442           \textcolor{stringliteral}{'output\_failures'},  \textcolor{comment}{\# generate crash reports or not}}
\DoxyCodeLine{443           \textcolor{stringliteral}{'ctu'}])  \textcolor{comment}{\# ctu control options}}
\DoxyCodeLine{444 }
\end{DoxyCode}


References libscanbuild.\+analyze.\+run().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a505fccfeb836b113101687366a231f5f}\label{namespacelibscanbuild_1_1analyze_a505fccfeb836b113101687366a231f5f}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!run@{run}}
\index{run@{run}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+run (\begin{DoxyParamCaption}\item[{}]{opts }\end{DoxyParamCaption})}

\begin{DoxyVerb} Entry point to run (or not) static analyzer against a single entry
of the compilation database.

This complex task is decomposed into smaller methods which are calling
each other in chain. If the analysis is not possible the given method
just return and break the chain.

The passed parameter is a python dictionary. Each method first check
that the needed parameters received. (This is done by the 'require'
decorator. It's like an 'assert' to check the contract between the
caller and the called method.) \end{DoxyVerb}
 

Definition at line 447 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{447 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a505fccfeb836b113101687366a231f5f}{run}}(opts):}
\DoxyCodeLine{448     \textcolor{stringliteral}{"{}"{}"{} Entry point to run (or not) static analyzer against a single entry}}
\DoxyCodeLine{449 \textcolor{stringliteral}{    of the compilation database.}}
\DoxyCodeLine{450 \textcolor{stringliteral}{}}
\DoxyCodeLine{451 \textcolor{stringliteral}{    This complex task is decomposed into smaller methods which are calling}}
\DoxyCodeLine{452 \textcolor{stringliteral}{    each other in chain. If the analysis is not possible the given method}}
\DoxyCodeLine{453 \textcolor{stringliteral}{    just return and break the chain.}}
\DoxyCodeLine{454 \textcolor{stringliteral}{}}
\DoxyCodeLine{455 \textcolor{stringliteral}{    The passed parameter is a python dictionary. Each method first check}}
\DoxyCodeLine{456 \textcolor{stringliteral}{    that the needed parameters received. (This is done by the 'require'}}
\DoxyCodeLine{457 \textcolor{stringliteral}{    decorator. It's like an 'assert' to check the contract between the}}
\DoxyCodeLine{458 \textcolor{stringliteral}{    caller and the called method.) "{}"{}"{}}}
\DoxyCodeLine{459 }
\DoxyCodeLine{460     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{461         command = opts.pop(\textcolor{stringliteral}{'command'})}
\DoxyCodeLine{462         command = command \textcolor{keywordflow}{if} isinstance(command, list) \textcolor{keywordflow}{else} \mbox{\hyperlink{namespacelibscanbuild_1_1shell_ae2a3d56a48c3f8031021d617491be88c}{decode}}(command)}
\DoxyCodeLine{463         logging.debug(\textcolor{stringliteral}{"{}Run analyzer against '\%s'"{}}, command)}
\DoxyCodeLine{464         opts.update(\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a88d630b78f7304bed2cf7dbedcf0c495}{classify\_parameters}}(command))}
\DoxyCodeLine{465 }
\DoxyCodeLine{466         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae904fd60725ff1fb90431b995a50faef}{arch\_check}}(opts)}
\DoxyCodeLine{467     \textcolor{keywordflow}{except} Exception:}
\DoxyCodeLine{468         logging.error(\textcolor{stringliteral}{"{}Problem occurred during analysis."{}}, exc\_info=1)}
\DoxyCodeLine{469         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{470 }
\DoxyCodeLine{471 }
\DoxyCodeLine{472 \textcolor{preprocessor}{@require(['clang', 'directory', 'flags', 'file', 'output\_dir', 'language',
          'error\_output', 'exit\_code'])}}
\DoxyCodeLine{473 }
\end{DoxyCode}


References libscanbuild.\+analyze.\+arch\+\_\+check(), libscanbuild.\+analyze.\+classify\+\_\+parameters(), libscanbuild.\+shell.\+decode(), and libscanbuild.\+analyze.\+report\+\_\+failure().



Referenced by libscanbuild.\+analyze.\+analyze\+\_\+compiler\+\_\+wrapper\+\_\+impl(), and libscanbuild.\+analyze.\+require().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}\label{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!run\_analyzer@{run\_analyzer}}
\index{run\_analyzer@{run\_analyzer}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{run\_analyzer()}{run\_analyzer()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+run\+\_\+analyzer (\begin{DoxyParamCaption}\item[{}]{opts,  }\item[{}]{continuation = {\ttfamily \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ab61521bbea87c4deac819a03ebf006fa}{report\+\_\+failure}}} }\end{DoxyParamCaption})}

\begin{DoxyVerb} It assembles the analysis command line and executes it. Capture the
output of the analysis and returns with it. If failure reports are
requested, it calls the continuation to generate it. \end{DoxyVerb}
 

Definition at line 532 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{532 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a30e68b322e290e30d92b1abd99d3adba}{run\_analyzer}}(opts, continuation=report\_failure):}
\DoxyCodeLine{533     \textcolor{stringliteral}{"{}"{}"{} It assembles the analysis command line and executes it. Capture the}}
\DoxyCodeLine{534 \textcolor{stringliteral}{    output of the analysis and returns with it. If failure reports are}}
\DoxyCodeLine{535 \textcolor{stringliteral}{    requested, it calls the continuation to generate it. "{}"{}"{}}}
\DoxyCodeLine{536 }
\DoxyCodeLine{537     \textcolor{keyword}{def }target():}
\DoxyCodeLine{538         \textcolor{stringliteral}{"{}"{}"{} Creates output file name for reports. "{}"{}"{}}}
\DoxyCodeLine{539         \textcolor{keywordflow}{if} opts[\textcolor{stringliteral}{'output\_format'}] \textcolor{keywordflow}{in} \{}
\DoxyCodeLine{540                 \textcolor{stringliteral}{'plist'},}
\DoxyCodeLine{541                 \textcolor{stringliteral}{'plist-\/html'},}
\DoxyCodeLine{542                 \textcolor{stringliteral}{'plist-\/multi-\/file'}\}:}
\DoxyCodeLine{543             (handle, name) = tempfile.mkstemp(prefix=\textcolor{stringliteral}{'report-\/'},}
\DoxyCodeLine{544                                               suffix=\textcolor{stringliteral}{'.plist'},}
\DoxyCodeLine{545                                               dir=opts[\textcolor{stringliteral}{'output\_dir'}])}
\DoxyCodeLine{546             os.close(handle)}
\DoxyCodeLine{547             \textcolor{keywordflow}{return} name}
\DoxyCodeLine{548         \textcolor{keywordflow}{elif} opts[\textcolor{stringliteral}{'output\_format'}] \textcolor{keywordflow}{in} \{}
\DoxyCodeLine{549                 \textcolor{stringliteral}{'sarif'},}
\DoxyCodeLine{550                 \textcolor{stringliteral}{'sarif-\/html'}\}:}
\DoxyCodeLine{551             (handle, name) = tempfile.mkstemp(prefix=\textcolor{stringliteral}{'result-\/'},}
\DoxyCodeLine{552                                               suffix=\textcolor{stringliteral}{'.sarif'},}
\DoxyCodeLine{553                                               dir=opts[\textcolor{stringliteral}{'output\_dir'}])}
\DoxyCodeLine{554             os.close(handle)}
\DoxyCodeLine{555             \textcolor{keywordflow}{return} name}
\DoxyCodeLine{556         \textcolor{keywordflow}{return} opts[\textcolor{stringliteral}{'output\_dir'}]}
\DoxyCodeLine{557 }
\DoxyCodeLine{558     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{559         cwd = opts[\textcolor{stringliteral}{'directory'}]}
\DoxyCodeLine{560         cmd = \mbox{\hyperlink{namespacelibscanbuild_1_1clang_aceaa1fcd710247641672c50964398c2a}{get\_arguments}}([opts[\textcolor{stringliteral}{'clang'}], \textcolor{stringliteral}{'-\/-\/analyze'}] +}
\DoxyCodeLine{561                             opts[\textcolor{stringliteral}{'direct\_args'}] + opts[\textcolor{stringliteral}{'flags'}] +}
\DoxyCodeLine{562                             [opts[\textcolor{stringliteral}{'file'}], \textcolor{stringliteral}{'-\/o'}, target()],}
\DoxyCodeLine{563                             cwd)}
\DoxyCodeLine{564         output = \mbox{\hyperlink{namespacelibscanbuild_a243b8757d8cfbc0be023301a8b951d6c}{run\_command}}(cmd, cwd=cwd)}
\DoxyCodeLine{565         \textcolor{keywordflow}{return} \{\textcolor{stringliteral}{'error\_output'}: output, \textcolor{stringliteral}{'exit\_code'}: 0\}}
\DoxyCodeLine{566     \textcolor{keywordflow}{except} subprocess.CalledProcessError \textcolor{keyword}{as} ex:}
\DoxyCodeLine{567         result = \{\textcolor{stringliteral}{'error\_output'}: ex.output, \textcolor{stringliteral}{'exit\_code'}: ex.returncode\}}
\DoxyCodeLine{568         \textcolor{keywordflow}{if} opts.get(\textcolor{stringliteral}{'output\_failures'}, \textcolor{keyword}{False}):}
\DoxyCodeLine{569             opts.update(result)}
\DoxyCodeLine{570             continuation(opts)}
\DoxyCodeLine{571         \textcolor{keywordflow}{return} result}
\DoxyCodeLine{572     \textcolor{keywordflow}{except} ClangErrorException \textcolor{keyword}{as} ex:}
\DoxyCodeLine{573         result = \{\textcolor{stringliteral}{'error\_output'}: ex.error, \textcolor{stringliteral}{'exit\_code'}: 0\}}
\DoxyCodeLine{574         \textcolor{keywordflow}{if} opts.get(\textcolor{stringliteral}{'output\_failures'}, \textcolor{keyword}{False}):}
\DoxyCodeLine{575             opts.update(result)}
\DoxyCodeLine{576             continuation(opts)}
\DoxyCodeLine{577         \textcolor{keywordflow}{return} result}
\DoxyCodeLine{578 }
\DoxyCodeLine{579 }

\end{DoxyCode}


References libscanbuild.\+analyze.\+extdef\+\_\+map\+\_\+list\+\_\+src\+\_\+to\+\_\+ast(), libscanbuild.\+clang.\+get\+\_\+arguments(), and libscanbuild.\+run\+\_\+command().



Referenced by libscanbuild.\+analyze.\+report\+\_\+failure().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}\label{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!run\_analyzer\_parallel@{run\_analyzer\_parallel}}
\index{run\_analyzer\_parallel@{run\_analyzer\_parallel}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{run\_analyzer\_parallel()}{run\_analyzer\_parallel()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+run\+\_\+analyzer\+\_\+parallel (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} Runs the analyzer against the given compilation database. \end{DoxyVerb}
 

Definition at line 208 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{208 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a62edf1ce0e836c051970ac438b02283b}{run\_analyzer\_parallel}}(args):}
\DoxyCodeLine{209     \textcolor{stringliteral}{"{}"{}"{} Runs the analyzer against the given compilation database. "{}"{}"{}}}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     \textcolor{keyword}{def }exclude(filename, directory):}
\DoxyCodeLine{212         \textcolor{stringliteral}{"{}"{}"{} Return true when any excluded directory prefix the filename. "{}"{}"{}}}
\DoxyCodeLine{213         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isabs(filename):}
\DoxyCodeLine{214             \textcolor{comment}{\# filename is either absolute or relative to directory. Need to turn}}
\DoxyCodeLine{215             \textcolor{comment}{\# it to absolute since 'args.excludes' are absolute paths.}}
\DoxyCodeLine{216             filename = os.path.normpath(os.path.join(directory, filename))}
\DoxyCodeLine{217         \textcolor{keywordflow}{return} any(re.match(\textcolor{stringliteral}{r'\string^'} + exclude\_directory, filename)}
\DoxyCodeLine{218                    \textcolor{keywordflow}{for} exclude\_directory \textcolor{keywordflow}{in} args.excludes)}
\DoxyCodeLine{219 }
\DoxyCodeLine{220     consts = \{}
\DoxyCodeLine{221         \textcolor{stringliteral}{'clang'}: args.clang,}
\DoxyCodeLine{222         \textcolor{stringliteral}{'output\_dir'}: args.output,}
\DoxyCodeLine{223         \textcolor{stringliteral}{'output\_format'}: args.output\_format,}
\DoxyCodeLine{224         \textcolor{stringliteral}{'output\_failures'}: args.output\_failures,}
\DoxyCodeLine{225         \textcolor{stringliteral}{'direct\_args'}: \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}{analyzer\_params}}(args),}
\DoxyCodeLine{226         \textcolor{stringliteral}{'force\_debug'}: args.force\_debug,}
\DoxyCodeLine{227         \textcolor{stringliteral}{'ctu'}: \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}{get\_ctu\_config\_from\_args}}(args)}
\DoxyCodeLine{228     \}}
\DoxyCodeLine{229 }
\DoxyCodeLine{230     logging.debug(\textcolor{stringliteral}{'run analyzer against compilation database'})}
\DoxyCodeLine{231     \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(args.cdb, \textcolor{stringliteral}{'r'}) \textcolor{keyword}{as} handle:}
\DoxyCodeLine{232         generator = (dict(cmd, **consts)}
\DoxyCodeLine{233                      \textcolor{keywordflow}{for} cmd \textcolor{keywordflow}{in} json.load(handle) \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} exclude(}
\DoxyCodeLine{234                             cmd[\textcolor{stringliteral}{'file'}], cmd[\textcolor{stringliteral}{'directory'}]))}
\DoxyCodeLine{235         \textcolor{comment}{\# when verbose output requested execute sequentially}}
\DoxyCodeLine{236         pool = multiprocessing.Pool(1 \textcolor{keywordflow}{if} args.verbose > 2 \textcolor{keywordflow}{else} \textcolor{keywordtype}{None})}
\DoxyCodeLine{237         \textcolor{keywordflow}{for} current \textcolor{keywordflow}{in} pool.imap\_unordered(run, generator):}
\DoxyCodeLine{238             \textcolor{keywordflow}{if} current \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{239                 \textcolor{comment}{\# display error message from the static analyzer}}
\DoxyCodeLine{240                 \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} current[\textcolor{stringliteral}{'error\_output'}]:}
\DoxyCodeLine{241                     logging.info(line.rstrip())}
\DoxyCodeLine{242         pool.close()}
\DoxyCodeLine{243         pool.join()}
\DoxyCodeLine{244 }
\DoxyCodeLine{245 }

\end{DoxyCode}


References libscanbuild.\+analyze.\+analyzer\+\_\+params(), libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+args(), and startfile.\+open().



Referenced by libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ae936eaf80eeb685aa31309e4220f9d34}\label{namespacelibscanbuild_1_1analyze_ae936eaf80eeb685aa31309e4220f9d34}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!scan\_build@{scan\_build}}
\index{scan\_build@{scan\_build}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{scan\_build()}{scan\_build()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+scan\+\_\+build (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\begin{DoxyVerb} Entry point for scan-build command. \end{DoxyVerb}
 

Definition at line 50 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{50 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ae936eaf80eeb685aa31309e4220f9d34}{scan\_build}}():}
\DoxyCodeLine{51     \textcolor{stringliteral}{"{}"{}"{} Entry point for scan-\/build command. "{}"{}"{}}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     args = \mbox{\hyperlink{namespacelibscanbuild_1_1arguments_af1e8772037b973224007e13c89c00631}{parse\_args\_for\_scan\_build}}()}
\DoxyCodeLine{54     \textcolor{comment}{\# will re-\/assign the report directory as new output}}
\DoxyCodeLine{55     \textcolor{keyword}{with} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_acf09f49183e565d9bcfcada3eeae1547}{report\_directory}}(}
\DoxyCodeLine{56             args.output, args.keep\_empty, args.output\_format) \textcolor{keyword}{as} args.output:}
\DoxyCodeLine{57         \textcolor{comment}{\# Run against a build command. there are cases, when analyzer run}}
\DoxyCodeLine{58         \textcolor{comment}{\# is not required. But we need to set up everything for the}}
\DoxyCodeLine{59         \textcolor{comment}{\# wrappers, because 'configure' needs to capture the CC/CXX values}}
\DoxyCodeLine{60         \textcolor{comment}{\# for the Makefile.}}
\DoxyCodeLine{61         \textcolor{keywordflow}{if} args.intercept\_first:}
\DoxyCodeLine{62             \textcolor{comment}{\# Run build command with intercept module.}}
\DoxyCodeLine{63             exit\_code = \mbox{\hyperlink{namespacelibscanbuild_1_1intercept_a86c3040b1932a4e5ab92fc0208cf7376}{capture}}(args)}
\DoxyCodeLine{64             \textcolor{comment}{\# Run the analyzer against the captured commands.}}
\DoxyCodeLine{65             \textcolor{keywordflow}{if} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}{need\_analyzer}}(args.build):}
\DoxyCodeLine{66                 \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a727f2164f89d25c11e2977655d3e6192}{govern\_analyzer\_runs}}(args)}
\DoxyCodeLine{67         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{68             \textcolor{comment}{\# Run build command and analyzer with compiler wrappers.}}
\DoxyCodeLine{69             environment = \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ad19f0ab8fa3cf72e2ec036f7d94f2cee}{setup\_environment}}(args)}
\DoxyCodeLine{70             exit\_code = \mbox{\hyperlink{namespacelibscanbuild_a18b34e68ad68eb5b285d3af3504c9b0c}{run\_build}}(args.build, env=environment)}
\DoxyCodeLine{71         \textcolor{comment}{\# Cover report generation and bug counting.}}
\DoxyCodeLine{72         number\_of\_bugs = \mbox{\hyperlink{namespacelibscanbuild_1_1report_aa904f76cf35a4ed932c596460fbcbbc8}{document}}(args)}
\DoxyCodeLine{73         \textcolor{comment}{\# Set exit status as it was requested.}}
\DoxyCodeLine{74         \textcolor{keywordflow}{return} number\_of\_bugs \textcolor{keywordflow}{if} args.status\_bugs \textcolor{keywordflow}{else} exit\_code}
\DoxyCodeLine{75 }
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{preprocessor}{@command\_entry\_point}}

\end{DoxyCode}


References libscanbuild.\+intercept.\+capture(), libscanbuild.\+report.\+document(), libscanbuild.\+analyze.\+govern\+\_\+analyzer\+\_\+runs(), libscanbuild.\+analyze.\+need\+\_\+analyzer(), libscanbuild.\+arguments.\+parse\+\_\+args\+\_\+for\+\_\+scan\+\_\+build(), libscanbuild.\+analyze.\+report\+\_\+directory(), libscanbuild.\+run\+\_\+build(), and libscanbuild.\+analyze.\+setup\+\_\+environment().

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ad19f0ab8fa3cf72e2ec036f7d94f2cee}\label{namespacelibscanbuild_1_1analyze_ad19f0ab8fa3cf72e2ec036f7d94f2cee}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!setup\_environment@{setup\_environment}}
\index{setup\_environment@{setup\_environment}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{setup\_environment()}{setup\_environment()}}
{\footnotesize\ttfamily def libscanbuild.\+analyze.\+setup\+\_\+environment (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}

\begin{DoxyVerb} Set up environment for build command to interpose compiler wrapper. \end{DoxyVerb}
 

Definition at line 278 of file analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{278 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_ad19f0ab8fa3cf72e2ec036f7d94f2cee}{setup\_environment}}(args):}
\DoxyCodeLine{279     \textcolor{stringliteral}{"{}"{}"{} Set up environment for build command to interpose compiler wrapper. "{}"{}"{}}}
\DoxyCodeLine{280 }
\DoxyCodeLine{281     environment = dict(os.environ)}
\DoxyCodeLine{282     environment.update(\mbox{\hyperlink{namespacelibscanbuild_a618962b6b79f889cbadd9fbc5971c938}{wrapper\_environment}}(args))}
\DoxyCodeLine{283     environment.update(\{}
\DoxyCodeLine{284         \textcolor{stringliteral}{'CC'}: COMPILER\_WRAPPER\_CC,}
\DoxyCodeLine{285         \textcolor{stringliteral}{'CXX'}: COMPILER\_WRAPPER\_CXX,}
\DoxyCodeLine{286         \textcolor{stringliteral}{'ANALYZE\_BUILD\_CLANG'}: args.clang \textcolor{keywordflow}{if} \mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a25b489e21548410a6f6ca7d6058e9a14}{need\_analyzer}}(args.build) \textcolor{keywordflow}{else} \textcolor{stringliteral}{''},}
\DoxyCodeLine{287         \textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_DIR'}: args.output,}
\DoxyCodeLine{288         \textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_FORMAT'}: args.output\_format,}
\DoxyCodeLine{289         \textcolor{stringliteral}{'ANALYZE\_BUILD\_REPORT\_FAILURES'}: \textcolor{stringliteral}{'yes'} \textcolor{keywordflow}{if} args.output\_failures \textcolor{keywordflow}{else} \textcolor{stringliteral}{''},}
\DoxyCodeLine{290         \textcolor{stringliteral}{'ANALYZE\_BUILD\_PARAMETERS'}: \textcolor{stringliteral}{' '}.join(\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_a9a2730f2c21ff9a529be335691f1c626}{analyzer\_params}}(args)),}
\DoxyCodeLine{291         \textcolor{stringliteral}{'ANALYZE\_BUILD\_FORCE\_DEBUG'}: \textcolor{stringliteral}{'yes'} \textcolor{keywordflow}{if} args.force\_debug \textcolor{keywordflow}{else} \textcolor{stringliteral}{''},}
\DoxyCodeLine{292         \textcolor{stringliteral}{'ANALYZE\_BUILD\_CTU'}: json.dumps(\mbox{\hyperlink{namespacelibscanbuild_1_1analyze_af93d444a00436010a8d789229d081555}{get\_ctu\_config\_from\_args}}(args))}
\DoxyCodeLine{293     \})}
\DoxyCodeLine{294     \textcolor{keywordflow}{return} environment}
\DoxyCodeLine{295 }
\DoxyCodeLine{296 }
\DoxyCodeLine{297 \textcolor{preprocessor}{@command\_entry\_point}}

\end{DoxyCode}


References libscanbuild.\+analyze.\+analyzer\+\_\+params(), libscanbuild.\+analyze.\+get\+\_\+ctu\+\_\+config\+\_\+from\+\_\+args(), libscanbuild.\+analyze.\+need\+\_\+analyzer(), and libscanbuild.\+wrapper\+\_\+environment().



Referenced by libscanbuild.\+analyze.\+scan\+\_\+build().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a465bf942eb92f47670cfbf42f3d3b492}\label{namespacelibscanbuild_1_1analyze_a465bf942eb92f47670cfbf42f3d3b492}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!COMPILER\_WRAPPER\_CC@{COMPILER\_WRAPPER\_CC}}
\index{COMPILER\_WRAPPER\_CC@{COMPILER\_WRAPPER\_CC}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{COMPILER\_WRAPPER\_CC}{COMPILER\_WRAPPER\_CC}}
{\footnotesize\ttfamily string libscanbuild.\+analyze.\+COMPILER\+\_\+\+WRAPPER\+\_\+\+CC = \textquotesingle{}analyze-\/cc\textquotesingle{}}



Definition at line 42 of file analyze.\+py.

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a093e4e01674825746c8dca2c3a0b3ad4}\label{namespacelibscanbuild_1_1analyze_a093e4e01674825746c8dca2c3a0b3ad4}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!COMPILER\_WRAPPER\_CXX@{COMPILER\_WRAPPER\_CXX}}
\index{COMPILER\_WRAPPER\_CXX@{COMPILER\_WRAPPER\_CXX}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{COMPILER\_WRAPPER\_CXX}{COMPILER\_WRAPPER\_CXX}}
{\footnotesize\ttfamily string libscanbuild.\+analyze.\+COMPILER\+\_\+\+WRAPPER\+\_\+\+CXX = \textquotesingle{}analyze-\/c++\textquotesingle{}}



Definition at line 43 of file analyze.\+py.

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_a60479fc2f65fd6f8fa70ece6a555a32d}\label{namespacelibscanbuild_1_1analyze_a60479fc2f65fd6f8fa70ece6a555a32d}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!CTU\_EXTDEF\_MAP\_FILENAME@{CTU\_EXTDEF\_MAP\_FILENAME}}
\index{CTU\_EXTDEF\_MAP\_FILENAME@{CTU\_EXTDEF\_MAP\_FILENAME}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{CTU\_EXTDEF\_MAP\_FILENAME}{CTU\_EXTDEF\_MAP\_FILENAME}}
{\footnotesize\ttfamily string libscanbuild.\+analyze.\+CTU\+\_\+\+EXTDEF\+\_\+\+MAP\+\_\+\+FILENAME = \textquotesingle{}external\+Def\+Map.\+txt\textquotesingle{}}



Definition at line 45 of file analyze.\+py.

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_af69a2823a3919b8223b79278cec07fb3}\label{namespacelibscanbuild_1_1analyze_af69a2823a3919b8223b79278cec07fb3}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!CTU\_TEMP\_DEFMAP\_FOLDER@{CTU\_TEMP\_DEFMAP\_FOLDER}}
\index{CTU\_TEMP\_DEFMAP\_FOLDER@{CTU\_TEMP\_DEFMAP\_FOLDER}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{CTU\_TEMP\_DEFMAP\_FOLDER}{CTU\_TEMP\_DEFMAP\_FOLDER}}
{\footnotesize\ttfamily string libscanbuild.\+analyze.\+CTU\+\_\+\+TEMP\+\_\+\+DEFMAP\+\_\+\+FOLDER = \textquotesingle{}tmp\+External\+Def\+Maps\textquotesingle{}}



Definition at line 46 of file analyze.\+py.

\mbox{\Hypertarget{namespacelibscanbuild_1_1analyze_ab246be544945b6a304ded48006891a91}\label{namespacelibscanbuild_1_1analyze_ab246be544945b6a304ded48006891a91}} 
\index{libscanbuild.analyze@{libscanbuild.analyze}!IGNORED\_FLAGS@{IGNORED\_FLAGS}}
\index{IGNORED\_FLAGS@{IGNORED\_FLAGS}!libscanbuild.analyze@{libscanbuild.analyze}}
\doxysubsubsection{\texorpdfstring{IGNORED\_FLAGS}{IGNORED\_FLAGS}}
{\footnotesize\ttfamily dictionary libscanbuild.\+analyze.\+IGNORED\+\_\+\+FLAGS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  \{}
\DoxyCodeLine{2     \textcolor{stringliteral}{'-\/c'}: 0,  \textcolor{comment}{\# compile option will be overwritten}}
\DoxyCodeLine{3     \textcolor{stringliteral}{'-\/fsyntax-\/only'}: 0,  \textcolor{comment}{\# static analyzer option will be overwritten}}
\DoxyCodeLine{4     \textcolor{stringliteral}{'-\/o'}: 1,  \textcolor{comment}{\# will set up own output file}}
\DoxyCodeLine{5     \textcolor{comment}{\# flags below are inherited from the perl implementation.}}
\DoxyCodeLine{6     \textcolor{stringliteral}{'-\/g'}: 0,}
\DoxyCodeLine{7     \textcolor{stringliteral}{'-\/save-\/temps'}: 0,}
\DoxyCodeLine{8     \textcolor{stringliteral}{'-\/install\_name'}: 1,}
\DoxyCodeLine{9     \textcolor{stringliteral}{'-\/exported\_symbols\_list'}: 1,}
\DoxyCodeLine{10     \textcolor{stringliteral}{'-\/current\_version'}: 1,}
\DoxyCodeLine{11     \textcolor{stringliteral}{'-\/compatibility\_version'}: 1,}
\DoxyCodeLine{12     \textcolor{stringliteral}{'-\/init'}: 1,}
\DoxyCodeLine{13     \textcolor{stringliteral}{'-\/e'}: 1,}
\DoxyCodeLine{14     \textcolor{stringliteral}{'-\/seg1addr'}: 1,}
\DoxyCodeLine{15     \textcolor{stringliteral}{'-\/bundle\_loader'}: 1,}
\DoxyCodeLine{16     \textcolor{stringliteral}{'-\/multiply\_defined'}: 1,}
\DoxyCodeLine{17     \textcolor{stringliteral}{'-\/sectorder'}: 3,}
\DoxyCodeLine{18     \textcolor{stringliteral}{'-\/-\/param'}: 1,}
\DoxyCodeLine{19     \textcolor{stringliteral}{'-\/-\/serialize-\/diagnostics'}: 1}
\DoxyCodeLine{20 \}}

\end{DoxyCode}


Definition at line 755 of file analyze.\+py.

