\hypertarget{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test}{}\doxysection{tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test Class Reference}
\label{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test}\index{tests.unit.test\_analyze.ReportFailureTest@{tests.unit.test\_analyze.ReportFailureTest}}
Inheritance diagram for tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a9adea754ee2d568e911e28390adb5c15}{assert\+Under\+Failures}} (self, path)
\item 
def \mbox{\hyperlink{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a816218f84f033a7cc83bd1ca76e8c8b8}{test\+\_\+report\+\_\+failure\+\_\+create\+\_\+files}} (self)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 185 of file test\+\_\+analyze.\+py.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a9adea754ee2d568e911e28390adb5c15}\label{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a9adea754ee2d568e911e28390adb5c15}} 
\index{tests.unit.test\_analyze.ReportFailureTest@{tests.unit.test\_analyze.ReportFailureTest}!assertUnderFailures@{assertUnderFailures}}
\index{assertUnderFailures@{assertUnderFailures}!tests.unit.test\_analyze.ReportFailureTest@{tests.unit.test\_analyze.ReportFailureTest}}
\doxysubsubsection{\texorpdfstring{assertUnderFailures()}{assertUnderFailures()}}
{\footnotesize\ttfamily def tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test.\+assert\+Under\+Failures (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{path }\end{DoxyParamCaption})}



Definition at line 187 of file test\+\_\+analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{187     \textcolor{keyword}{def }assertUnderFailures(self, path):}
\DoxyCodeLine{188         self.assertEqual(\textcolor{stringliteral}{'failures'}, os.path.basename(os.path.dirname(path)))}
\DoxyCodeLine{189 }

\end{DoxyCode}


Referenced by tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test.\+test\+\_\+report\+\_\+failure\+\_\+create\+\_\+files().

\mbox{\Hypertarget{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a816218f84f033a7cc83bd1ca76e8c8b8}\label{classtests_1_1unit_1_1test__analyze_1_1_report_failure_test_a816218f84f033a7cc83bd1ca76e8c8b8}} 
\index{tests.unit.test\_analyze.ReportFailureTest@{tests.unit.test\_analyze.ReportFailureTest}!test\_report\_failure\_create\_files@{test\_report\_failure\_create\_files}}
\index{test\_report\_failure\_create\_files@{test\_report\_failure\_create\_files}!tests.unit.test\_analyze.ReportFailureTest@{tests.unit.test\_analyze.ReportFailureTest}}
\doxysubsubsection{\texorpdfstring{test\_report\_failure\_create\_files()}{test\_report\_failure\_create\_files()}}
{\footnotesize\ttfamily def tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test.\+test\+\_\+report\+\_\+failure\+\_\+create\+\_\+files (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 190 of file test\+\_\+analyze.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{190     \textcolor{keyword}{def }test\_report\_failure\_create\_files(self):}
\DoxyCodeLine{191         \textcolor{keyword}{with} \mbox{\hyperlink{namespacelibear_a44657565063241a3d383ec724243c023}{libear.TemporaryDirectory}}() \textcolor{keyword}{as} tmpdir:}
\DoxyCodeLine{192             \textcolor{comment}{\# create input file}}
\DoxyCodeLine{193             filename = os.path.join(tmpdir, \textcolor{stringliteral}{'test.c'})}
\DoxyCodeLine{194             \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(filename, \textcolor{stringliteral}{'w'}) \textcolor{keyword}{as} handle:}
\DoxyCodeLine{195                 handle.write(\textcolor{stringliteral}{'int main() \{ return 0'})}
\DoxyCodeLine{196             uname\_msg = \textcolor{stringliteral}{' '}.join(os.uname()) + os.linesep}
\DoxyCodeLine{197             error\_msg = \textcolor{stringliteral}{'this is my error output'}}
\DoxyCodeLine{198             \textcolor{comment}{\# execute test}}
\DoxyCodeLine{199             opts = \{}
\DoxyCodeLine{200                 \textcolor{stringliteral}{'clang'}: \textcolor{stringliteral}{'clang'},}
\DoxyCodeLine{201                 \textcolor{stringliteral}{'directory'}: os.getcwd(),}
\DoxyCodeLine{202                 \textcolor{stringliteral}{'flags'}: [],}
\DoxyCodeLine{203                 \textcolor{stringliteral}{'file'}: filename,}
\DoxyCodeLine{204                 \textcolor{stringliteral}{'output\_dir'}: tmpdir,}
\DoxyCodeLine{205                 \textcolor{stringliteral}{'language'}: \textcolor{stringliteral}{'c'},}
\DoxyCodeLine{206                 \textcolor{stringliteral}{'error\_type'}: \textcolor{stringliteral}{'other\_error'},}
\DoxyCodeLine{207                 \textcolor{stringliteral}{'error\_output'}: error\_msg,}
\DoxyCodeLine{208                 \textcolor{stringliteral}{'exit\_code'}: 13}
\DoxyCodeLine{209             \}}
\DoxyCodeLine{210             sut.report\_failure(opts)}
\DoxyCodeLine{211             \textcolor{comment}{\# verify the result}}
\DoxyCodeLine{212             result = dict()}
\DoxyCodeLine{213             pp\_file = \textcolor{keywordtype}{None}}
\DoxyCodeLine{214             \textcolor{keywordflow}{for} root, \_, files \textcolor{keywordflow}{in} os.walk(tmpdir):}
\DoxyCodeLine{215                 keys = [os.path.join(root, name) \textcolor{keywordflow}{for} name \textcolor{keywordflow}{in} files]}
\DoxyCodeLine{216                 \textcolor{keywordflow}{for} key \textcolor{keywordflow}{in} keys:}
\DoxyCodeLine{217                     \textcolor{keyword}{with} \mbox{\hyperlink{namespacestartfile_aa582f75134b683dc321c07d01ff8e501}{open}}(key, \textcolor{stringliteral}{'r'}) \textcolor{keyword}{as} handle:}
\DoxyCodeLine{218                         result[key] = handle.readlines()}
\DoxyCodeLine{219                     \textcolor{keywordflow}{if} re.match(\textcolor{stringliteral}{r'\string^(.*/)+clang(.*)\(\backslash\).i\$'}, key):}
\DoxyCodeLine{220                         pp\_file = key}
\DoxyCodeLine{221 }
\DoxyCodeLine{222             \textcolor{comment}{\# prepocessor file generated}}
\DoxyCodeLine{223             self.assertUnderFailures(pp\_file)}
\DoxyCodeLine{224             \textcolor{comment}{\# info file generated and content dumped}}
\DoxyCodeLine{225             info\_file = pp\_file + \textcolor{stringliteral}{'.info.txt'}}
\DoxyCodeLine{226             self.assertTrue(info\_file \textcolor{keywordflow}{in} result)}
\DoxyCodeLine{227             self.assertEqual(\textcolor{stringliteral}{'Other Error\(\backslash\)n'}, result[info\_file][1])}
\DoxyCodeLine{228             self.assertEqual(uname\_msg, result[info\_file][3])}
\DoxyCodeLine{229             \textcolor{comment}{\# error file generated and content dumped}}
\DoxyCodeLine{230             error\_file = pp\_file + \textcolor{stringliteral}{'.stderr.txt'}}
\DoxyCodeLine{231             self.assertTrue(error\_file \textcolor{keywordflow}{in} result)}
\DoxyCodeLine{232             self.assertEqual([error\_msg], result[error\_file])}
\DoxyCodeLine{233 }
\DoxyCodeLine{234 }

\end{DoxyCode}


References tests.\+unit.\+test\+\_\+analyze.\+Report\+Failure\+Test.\+assert\+Under\+Failures(), startfile.\+open(), and libear.\+Temporary\+Directory().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/maximilian/clang-\/llvm/clang/tools/scan-\/build-\/py/tests/unit/\mbox{\hyperlink{test__analyze_8py}{test\+\_\+analyze.\+py}}\end{DoxyCompactItemize}
