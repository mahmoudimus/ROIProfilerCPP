\hypertarget{class_visitor}{}\doxysection{Visitor Class Reference}
\label{class_visitor}\index{Visitor@{Visitor}}
Inheritance diagram for Visitor\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_visitor}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_visitor_a359811b176e137a82a7317e9d5273555}{Visitor}} (ASTContext $\ast$Context)
\item 
virtual bool \mbox{\hyperlink{class_visitor_a4edf72b13c0c55c7be015111c3c6e5df}{Visit\+Stmt}} (Stmt $\ast$stmt)
\begin{DoxyCompactList}\small\item\em Visit every statement linked to input file. If a stmt option is specified the tools searches for the first occurance of an statement with the specified id. The statement is then casted to the matching statement class and body of the statement will be extracted and annotated. \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{class_visitor_a55ed637ddbf214db01b1b5d65ccfd263}{Visit\+Function\+Decl}} (Function\+Decl $\ast$func)
\begin{DoxyCompactList}\small\item\em Visit every function linked to input file. The functions are traversed to find locations for initialization, runtime performance counter and for printing the summary. If stmt option is not specified, the main method will be traversed. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{class_visitor_a2c9cc57ee3a518a193ea88384cbf3937}{$\sim$\+Visitor}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 212 of file Hagn\+Tool.\+cpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_visitor_a359811b176e137a82a7317e9d5273555}\label{class_visitor_a359811b176e137a82a7317e9d5273555}} 
\index{Visitor@{Visitor}!Visitor@{Visitor}}
\index{Visitor@{Visitor}!Visitor@{Visitor}}
\doxysubsubsection{\texorpdfstring{Visitor()}{Visitor()}}
{\footnotesize\ttfamily Visitor\+::\+Visitor (\begin{DoxyParamCaption}\item[{ASTContext $\ast$}]{Context }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



Definition at line 217 of file Hagn\+Tool.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{218             : astContext( Context ) \textcolor{comment}{// initialize private members}}
\DoxyCodeLine{219     \{}
\DoxyCodeLine{220         \mbox{\hyperlink{_hagn_tool_8h_a284f3685f06f0e161d79ef2f7513460b}{rewriter}}.setSourceMgr( astContext-\/>getSourceManager( ),}
\DoxyCodeLine{221                                astContext-\/>getLangOpts( ));}
\DoxyCodeLine{222     \}}

\end{DoxyCode}


References rewriter.

\mbox{\Hypertarget{class_visitor_a2c9cc57ee3a518a193ea88384cbf3937}\label{class_visitor_a2c9cc57ee3a518a193ea88384cbf3937}} 
\index{Visitor@{Visitor}!````~Visitor@{$\sim$Visitor}}
\index{````~Visitor@{$\sim$Visitor}!Visitor@{Visitor}}
\doxysubsubsection{\texorpdfstring{$\sim$Visitor()}{~Visitor()}}
{\footnotesize\ttfamily virtual Visitor\+::$\sim$\+Visitor (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Definition at line 328 of file Hagn\+Tool.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{328 \{ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_visitor_a55ed637ddbf214db01b1b5d65ccfd263}\label{class_visitor_a55ed637ddbf214db01b1b5d65ccfd263}} 
\index{Visitor@{Visitor}!VisitFunctionDecl@{VisitFunctionDecl}}
\index{VisitFunctionDecl@{VisitFunctionDecl}!Visitor@{Visitor}}
\doxysubsubsection{\texorpdfstring{VisitFunctionDecl()}{VisitFunctionDecl()}}
{\footnotesize\ttfamily virtual bool Visitor\+::\+Visit\+Function\+Decl (\begin{DoxyParamCaption}\item[{Function\+Decl $\ast$}]{func }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Visit every function linked to input file. The functions are traversed to find locations for initialization, runtime performance counter and for printing the summary. If stmt option is not specified, the main method will be traversed. 

! 

Definition at line 281 of file Hagn\+Tool.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{281                                                          \{}
\DoxyCodeLine{282 }
\DoxyCodeLine{283         \textcolor{comment}{// find initialization location for includes and initialization of hagn lib}}
\DoxyCodeLine{284         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{_hagn_tool_8h_a824216c5325518b8eec871b8174fec3f}{initializationLocation}}.isInvalid( ) \&\&}
\DoxyCodeLine{285              astContext-\/>getSourceManager( ).isInMainFile( func-\/>getLocation( ))) \{}
\DoxyCodeLine{286             \mbox{\hyperlink{_hagn_tool_8h_a824216c5325518b8eec871b8174fec3f}{initializationLocation}} = func-\/>getOuterLocStart( );}
\DoxyCodeLine{287         \}}
\DoxyCodeLine{288 }
\DoxyCodeLine{289         \textcolor{comment}{// find first location in main class for runtime measurement}}
\DoxyCodeLine{290         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{_hagn_tool_8h_a6a7a6f87a39ed5405e4f4df9e1205530}{runtimeStartLocation}}.isInvalid( ) \&\&}
\DoxyCodeLine{291              astContext-\/>getSourceManager( ).isInMainFile( func-\/>getLocation( ))) \{}
\DoxyCodeLine{292             \textcolor{keywordflow}{if} ( func-\/>isMain( )) \{}
\DoxyCodeLine{293                 SourceLocation locAfterBrace( clang::Lexer::findLocationAfterToken(}
\DoxyCodeLine{294                         func-\/>getBody( )-\/>getBeginLoc( ).getLocWithOffset( -\/1 ), clang::tok::l\_brace,}
\DoxyCodeLine{295                         astContext-\/>getSourceManager( ),}
\DoxyCodeLine{296                         astContext-\/>getLangOpts( ), \textcolor{keyword}{true} ));}
\DoxyCodeLine{297 }
\DoxyCodeLine{298                 \mbox{\hyperlink{_hagn_tool_8h_a6a7a6f87a39ed5405e4f4df9e1205530}{runtimeStartLocation}} = locAfterBrace;}
\DoxyCodeLine{299             \}}
\DoxyCodeLine{300         \}}
\DoxyCodeLine{301 }
\DoxyCodeLine{302         \textcolor{comment}{// find summary location in main class for ending runtime event and print event}}
\DoxyCodeLine{303         \textcolor{keywordflow}{if} ( \mbox{\hyperlink{_hagn_tool_8h_a4d00baee5074510abc5b5853de403290}{summaryLocation}}.isInvalid( ) \&\&}
\DoxyCodeLine{304              astContext-\/>getSourceManager( ).isInMainFile( func-\/>getLocation( ))) \{}
\DoxyCodeLine{305             \textcolor{keywordflow}{if} ( func-\/>isMain( )) \{}
\DoxyCodeLine{306                 \textcolor{keywordflow}{for} ( Stmt::child\_iterator i = func-\/>getBody( )-\/>child\_begin( ), e = func-\/>getBody( )-\/>child\_end( );}
\DoxyCodeLine{307                       i != e; ++i ) \{}
\DoxyCodeLine{308                     Stmt *currStmt = *i;}
\DoxyCodeLine{309                     \textcolor{keywordflow}{if} ( currStmt-\/>getStmtClass( ) == Stmt::ReturnStmtClass ) \{}
\DoxyCodeLine{310                         \mbox{\hyperlink{_hagn_tool_8h_a4d00baee5074510abc5b5853de403290}{summaryLocation}} = currStmt-\/>getBeginLoc( );}
\DoxyCodeLine{311                     \}}
\DoxyCodeLine{312                 \}}
\DoxyCodeLine{313             \}}
\DoxyCodeLine{314         \}}
\DoxyCodeLine{315 }
\DoxyCodeLine{316         \textcolor{comment}{// annotate only main function if statement option is start}}
\DoxyCodeLine{317         \textcolor{keywordflow}{if} ( astContext-\/>getSourceManager( ).isInMainFile( func-\/>getLocation( ))) \{}
\DoxyCodeLine{318             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{_hagn_tool_8h_a29f40cbf56ba1c9a5d4750faccff56c6}{statementOption}} == \textcolor{stringliteral}{"{}start"{}} ) \{}
\DoxyCodeLine{319                 \textcolor{keywordflow}{if} ( func-\/>isMain( )) \{}
\DoxyCodeLine{320                     \mbox{\hyperlink{_hagn_tool_8cpp_a19133d8d4f04cd2fa902dd1f8bc7426f}{traverseChildren}}( func-\/>getBody( ), astContext );}
\DoxyCodeLine{321                 \}}
\DoxyCodeLine{322             \}}
\DoxyCodeLine{323         \}}
\DoxyCodeLine{324 }
\DoxyCodeLine{325         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{326     \}}

\end{DoxyCode}


References initialization\+Location, runtime\+Start\+Location, statement\+Option, summary\+Location, and traverse\+Children().

\mbox{\Hypertarget{class_visitor_a4edf72b13c0c55c7be015111c3c6e5df}\label{class_visitor_a4edf72b13c0c55c7be015111c3c6e5df}} 
\index{Visitor@{Visitor}!VisitStmt@{VisitStmt}}
\index{VisitStmt@{VisitStmt}!Visitor@{Visitor}}
\doxysubsubsection{\texorpdfstring{VisitStmt()}{VisitStmt()}}
{\footnotesize\ttfamily virtual bool Visitor\+::\+Visit\+Stmt (\begin{DoxyParamCaption}\item[{Stmt $\ast$}]{stmt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Visit every statement linked to input file. If a stmt option is specified the tools searches for the first occurance of an statement with the specified id. The statement is then casted to the matching statement class and body of the statement will be extracted and annotated. 

! 

Definition at line 232 of file Hagn\+Tool.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{232                                          \{}
\DoxyCodeLine{233         \textcolor{comment}{// only statements in main file}}
\DoxyCodeLine{234         \textcolor{keywordflow}{if} ( astContext-\/>getSourceManager( ).isInMainFile( stmt-\/>getBeginLoc( ))) \{}
\DoxyCodeLine{235             \textcolor{comment}{// when stmt identifier is specified}}
\DoxyCodeLine{236             \textcolor{keywordflow}{if} ( \mbox{\hyperlink{_hagn_tool_8h_a29f40cbf56ba1c9a5d4750faccff56c6}{statementOption}} != \textcolor{stringliteral}{"{}start"{}} ) \{}
\DoxyCodeLine{237 }
\DoxyCodeLine{238                 \textcolor{comment}{// get statement identifier and cast to string}}
\DoxyCodeLine{239                 int64\_t currentId = stmt-\/>getID( *astContext );}
\DoxyCodeLine{240                 std::string currentIdString = std::to\_string( currentId );}
\DoxyCodeLine{241 }
\DoxyCodeLine{242                 \textcolor{comment}{// find statement with matching id}}
\DoxyCodeLine{243                 \textcolor{keywordflow}{if} ( currentIdString == \mbox{\hyperlink{_hagn_tool_8h_a29f40cbf56ba1c9a5d4750faccff56c6}{statementOption}} ) \{}
\DoxyCodeLine{244                     \mbox{\hyperlink{_hagn_tool_8h_a284f3685f06f0e161d79ef2f7513460b}{rewriter}}.InsertText( stmt-\/>getBeginLoc(), \textcolor{stringliteral}{"{}dataStorage.startEvent(1);\(\backslash\)n"{}} );}
\DoxyCodeLine{245                     \mbox{\hyperlink{_hagn_tool_8h_a284f3685f06f0e161d79ef2f7513460b}{rewriter}}.InsertText( \mbox{\hyperlink{_hagn_tool_8cpp_adfd72dc10aea9a01b5e9c1785033949d}{getLocationAfterToken}}(stmt-\/>getEndLoc(), astContext), \textcolor{stringliteral}{"{}dataStorage.endEvent(1);\(\backslash\)n"{}} );}
\DoxyCodeLine{246 }
\DoxyCodeLine{247                     \textcolor{keywordflow}{if} ( stmt-\/>getStmtClass( ) == Stmt::CallExprClass ) \{}
\DoxyCodeLine{248                         CallExpr *expr = cast<CallExpr>( stmt );}
\DoxyCodeLine{249                         Stmt *nextBody = expr-\/>getDirectCallee( )-\/>getBody( );}
\DoxyCodeLine{250                         \mbox{\hyperlink{_hagn_tool_8cpp_a19133d8d4f04cd2fa902dd1f8bc7426f}{traverseChildren}}( nextBody, astContext );}
\DoxyCodeLine{251                     \}}
\DoxyCodeLine{252                     \textcolor{keywordflow}{if} ( stmt-\/>getStmtClass( ) == Stmt::ForStmtClass ) \{}
\DoxyCodeLine{253                         ForStmt *forStmt = cast<ForStmt>( stmt );}
\DoxyCodeLine{254                         Stmt *nextBody = forStmt-\/>getBody( );}
\DoxyCodeLine{255                         \mbox{\hyperlink{_hagn_tool_8cpp_a19133d8d4f04cd2fa902dd1f8bc7426f}{traverseChildren}}( nextBody, astContext );}
\DoxyCodeLine{256                     \}}
\DoxyCodeLine{257                     \textcolor{keywordflow}{if} ( stmt-\/>getStmtClass( ) == Stmt::WhileStmtClass ) \{}
\DoxyCodeLine{258                         WhileStmt *whileStmt = cast<WhileStmt>( stmt );}
\DoxyCodeLine{259                         Stmt *nextBody = whileStmt-\/>getBody( );}
\DoxyCodeLine{260                         \mbox{\hyperlink{_hagn_tool_8cpp_a19133d8d4f04cd2fa902dd1f8bc7426f}{traverseChildren}}( nextBody, astContext );}
\DoxyCodeLine{261                     \}}
\DoxyCodeLine{262                     \textcolor{keywordflow}{if} ( stmt-\/>getStmtClass( ) == Stmt::IfStmtClass ) \{}
\DoxyCodeLine{263                         IfStmt *ifStmt = cast<IfStmt>( stmt );}
\DoxyCodeLine{264                         Stmt *nextBody = ifStmt-\/>getThen( );}
\DoxyCodeLine{265                         \mbox{\hyperlink{_hagn_tool_8cpp_a19133d8d4f04cd2fa902dd1f8bc7426f}{traverseChildren}}( nextBody, astContext );}
\DoxyCodeLine{266                     \}}
\DoxyCodeLine{267                 \}}
\DoxyCodeLine{268             \}}
\DoxyCodeLine{269         \}}
\DoxyCodeLine{270         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{271     \}}

\end{DoxyCode}


References get\+Location\+After\+Token(), rewriter, statement\+Option, and traverse\+Children().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_hagn_tool_8cpp}{Hagn\+Tool.\+cpp}}\end{DoxyCompactItemize}
