\hypertarget{ear_8c}{}\doxysection{/\+Users/maximilian/clang-\/llvm/clang/tools/scan-\/build-\/py/lib/libear/ear.c File Reference}
\label{ear_8c}\index{/Users/maximilian/clang-\/llvm/clang/tools/scan-\/build-\/py/lib/libear/ear.c@{/Users/maximilian/clang-\/llvm/clang/tools/scan-\/build-\/py/lib/libear/ear.c}}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$dlfcn.\+h$>$}\newline
{\ttfamily \#include $<$pthread.\+h$>$}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{ear_8c_a5115e8a1e6e4df1f94053f3c242ce90a}{ENV\+\_\+\+OUTPUT}}~\char`\"{}INTERCEPT\+\_\+\+BUILD\+\_\+\+TARGET\+\_\+\+DIR\char`\"{}
\item 
\#define \mbox{\hyperlink{ear_8c_a9dbd1fc3669ce86869300a2079bb4896}{ENV\+\_\+\+PRELOAD}}~\char`\"{}LD\+\_\+\+PRELOAD\char`\"{}
\item 
\#define \mbox{\hyperlink{ear_8c_af7693882c9eb9fbf7ad9d49f8ecb0f7a}{ENV\+\_\+\+SIZE}}~2
\item 
\#define \mbox{\hyperlink{ear_8c_a591f1e0a0941e215395e8e9cdc076910}{DLSYM}}(TYPE\+\_\+,  VAR\+\_\+,  SYMBOL\+\_\+)
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef char const  $\ast$ \mbox{\hyperlink{ear_8c_a217ea321e642e4196e75e746e4eb898e}{bear\+\_\+env\+\_\+t}}\mbox{[}\mbox{\hyperlink{ear_8c_af7693882c9eb9fbf7ad9d49f8ecb0f7a}{ENV\+\_\+\+SIZE}}\mbox{]}
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
char $\ast$$\ast$ \mbox{\hyperlink{ear_8c_aa006daaf11f1e2e45a6ababaf463212b}{environ}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{ear_8c_a591f1e0a0941e215395e8e9cdc076910}\label{ear_8c_a591f1e0a0941e215395e8e9cdc076910}} 
\index{ear.c@{ear.c}!DLSYM@{DLSYM}}
\index{DLSYM@{DLSYM}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{DLSYM}{DLSYM}}
{\footnotesize\ttfamily \#define DLSYM(\begin{DoxyParamCaption}\item[{}]{TYPE\+\_\+,  }\item[{}]{VAR\+\_\+,  }\item[{}]{SYMBOL\+\_\+ }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \textcolor{keyword}{union }\{                                                                      \(\backslash\)}
\DoxyCodeLine{    void *from;                                                                \(\backslash\)}
\DoxyCodeLine{    TYPE\_ to;                                                                  \(\backslash\)}
\DoxyCodeLine{  \} cast;                                                                      \(\backslash\)}
\DoxyCodeLine{  if (0 == (cast.from = dlsym(RTLD\_NEXT, SYMBOL\_))) \{                          \(\backslash\)}
\DoxyCodeLine{    perror(\textcolor{stringliteral}{"{}bear: dlsym"{}});                                                     \(\backslash\)}
\DoxyCodeLine{    exit(EXIT\_FAILURE);                                                        \(\backslash\)}
\DoxyCodeLine{  \}                                                                            \(\backslash\)}
\DoxyCodeLine{  TYPE\_ \textcolor{keyword}{const} VAR\_ = cast.to;}

\end{DoxyCode}


Definition at line 53 of file ear.\+c.

\mbox{\Hypertarget{ear_8c_a5115e8a1e6e4df1f94053f3c242ce90a}\label{ear_8c_a5115e8a1e6e4df1f94053f3c242ce90a}} 
\index{ear.c@{ear.c}!ENV\_OUTPUT@{ENV\_OUTPUT}}
\index{ENV\_OUTPUT@{ENV\_OUTPUT}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{ENV\_OUTPUT}{ENV\_OUTPUT}}
{\footnotesize\ttfamily \#define ENV\+\_\+\+OUTPUT~\char`\"{}INTERCEPT\+\_\+\+BUILD\+\_\+\+TARGET\+\_\+\+DIR\char`\"{}}



Definition at line 43 of file ear.\+c.

\mbox{\Hypertarget{ear_8c_a9dbd1fc3669ce86869300a2079bb4896}\label{ear_8c_a9dbd1fc3669ce86869300a2079bb4896}} 
\index{ear.c@{ear.c}!ENV\_PRELOAD@{ENV\_PRELOAD}}
\index{ENV\_PRELOAD@{ENV\_PRELOAD}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{ENV\_PRELOAD}{ENV\_PRELOAD}}
{\footnotesize\ttfamily \#define ENV\+\_\+\+PRELOAD~\char`\"{}LD\+\_\+\+PRELOAD\char`\"{}}



Definition at line 49 of file ear.\+c.

\mbox{\Hypertarget{ear_8c_af7693882c9eb9fbf7ad9d49f8ecb0f7a}\label{ear_8c_af7693882c9eb9fbf7ad9d49f8ecb0f7a}} 
\index{ear.c@{ear.c}!ENV\_SIZE@{ENV\_SIZE}}
\index{ENV\_SIZE@{ENV\_SIZE}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{ENV\_SIZE}{ENV\_SIZE}}
{\footnotesize\ttfamily \#define ENV\+\_\+\+SIZE~2}



Definition at line 50 of file ear.\+c.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{ear_8c_a217ea321e642e4196e75e746e4eb898e}\label{ear_8c_a217ea321e642e4196e75e746e4eb898e}} 
\index{ear.c@{ear.c}!bear\_env\_t@{bear\_env\_t}}
\index{bear\_env\_t@{bear\_env\_t}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{bear\_env\_t}{bear\_env\_t}}
{\footnotesize\ttfamily typedef char const$\ast$ bear\+\_\+env\+\_\+t\mbox{[}\mbox{\hyperlink{ear_8c_af7693882c9eb9fbf7ad9d49f8ecb0f7a}{ENV\+\_\+\+SIZE}}\mbox{]}}



Definition at line 64 of file ear.\+c.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{ear_8c_aa006daaf11f1e2e45a6ababaf463212b}\label{ear_8c_aa006daaf11f1e2e45a6ababaf463212b}} 
\index{ear.c@{ear.c}!environ@{environ}}
\index{environ@{environ}!ear.c@{ear.c}}
\doxysubsubsection{\texorpdfstring{environ}{environ}}
{\footnotesize\ttfamily char$\ast$$\ast$ environ\hspace{0.3cm}{\ttfamily [extern]}}

This file implements a shared library. This library can be pre-\/loaded by the dynamic linker of the Operating System (OS). It implements a few function related to process creation. By pre-\/load this library the executed process uses these functions instead of those from the standard library.

The idea here is to inject a logic before call the real methods. The logic is to dump the call into a file. To call the real method this library is doing the job of the dynamic linker.

The only input for the log writing is about the destination directory. This is passed as environment variable. 