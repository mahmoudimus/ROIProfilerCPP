\hypertarget{namespacelibscanbuild_1_1compilation}{}\doxysection{libscanbuild.\+compilation Namespace Reference}
\label{namespacelibscanbuild_1_1compilation}\index{libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_ae846942ed0e175486de0bbe3a258852c}{split\+\_\+command}} (command)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}{classify\+\_\+source}} (filename, c\+\_\+compiler=True)
\item 
def \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}{compiler\+\_\+language}} (command)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
dictionary \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_a69b7030a86c612d8cabfe08cc5149c9f}{IGNORED\+\_\+\+FLAGS}}
\item 
\mbox{\hyperlink{namespacelibscanbuild_1_1compilation_a584c2b412eb55c0afaf8dec59bab45d0}{COMPILER\+\_\+\+PATTERNS}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}\label{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}} 
\index{libscanbuild.compilation@{libscanbuild.compilation}!classify\_source@{classify\_source}}
\index{classify\_source@{classify\_source}!libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsubsection{\texorpdfstring{classify\_source()}{classify\_source()}}
{\footnotesize\ttfamily def libscanbuild.\+compilation.\+classify\+\_\+source (\begin{DoxyParamCaption}\item[{}]{filename,  }\item[{}]{c\+\_\+compiler = {\ttfamily True} }\end{DoxyParamCaption})}

\begin{DoxyVerb} Return the language from file name extension. \end{DoxyVerb}
 

Definition at line 103 of file compilation.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{103 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}{classify\_source}}(filename, c\_compiler=True):}
\DoxyCodeLine{104     \textcolor{stringliteral}{"{}"{}"{} Return the language from file name extension. "{}"{}"{}}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     mapping = \{}
\DoxyCodeLine{107         \textcolor{stringliteral}{'.c'}: \textcolor{stringliteral}{'c'} \textcolor{keywordflow}{if} c\_compiler \textcolor{keywordflow}{else} \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{108         \textcolor{stringliteral}{'.i'}: \textcolor{stringliteral}{'c-\/cpp-\/output'} \textcolor{keywordflow}{if} c\_compiler \textcolor{keywordflow}{else} \textcolor{stringliteral}{'c++-\/cpp-\/output'},}
\DoxyCodeLine{109         \textcolor{stringliteral}{'.ii'}: \textcolor{stringliteral}{'c++-\/cpp-\/output'},}
\DoxyCodeLine{110         \textcolor{stringliteral}{'.m'}: \textcolor{stringliteral}{'objective-\/c'},}
\DoxyCodeLine{111         \textcolor{stringliteral}{'.mi'}: \textcolor{stringliteral}{'objective-\/c-\/cpp-\/output'},}
\DoxyCodeLine{112         \textcolor{stringliteral}{'.mm'}: \textcolor{stringliteral}{'objective-\/c++'},}
\DoxyCodeLine{113         \textcolor{stringliteral}{'.mii'}: \textcolor{stringliteral}{'objective-\/c++-\/cpp-\/output'},}
\DoxyCodeLine{114         \textcolor{stringliteral}{'.C'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{115         \textcolor{stringliteral}{'.cc'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{116         \textcolor{stringliteral}{'.CC'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{117         \textcolor{stringliteral}{'.cp'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{118         \textcolor{stringliteral}{'.cpp'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{119         \textcolor{stringliteral}{'.cxx'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{120         \textcolor{stringliteral}{'.c++'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{121         \textcolor{stringliteral}{'.C++'}: \textcolor{stringliteral}{'c++'},}
\DoxyCodeLine{122         \textcolor{stringliteral}{'.txx'}: \textcolor{stringliteral}{'c++'}}
\DoxyCodeLine{123     \}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \_\_, extension = os.path.splitext(os.path.basename(filename))}
\DoxyCodeLine{126     \textcolor{keywordflow}{return} mapping.get(extension)}
\DoxyCodeLine{127 }
\DoxyCodeLine{128 }

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+classify\+\_\+parameters(), libscanbuild.\+analyze.\+language\+\_\+check(), and libscanbuild.\+compilation.\+split\+\_\+command().

\mbox{\Hypertarget{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}\label{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}} 
\index{libscanbuild.compilation@{libscanbuild.compilation}!compiler\_language@{compiler\_language}}
\index{compiler\_language@{compiler\_language}!libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsubsection{\texorpdfstring{compiler\_language()}{compiler\_language()}}
{\footnotesize\ttfamily def libscanbuild.\+compilation.\+compiler\+\_\+language (\begin{DoxyParamCaption}\item[{}]{command }\end{DoxyParamCaption})}

\begin{DoxyVerb} A predicate to decide the command is a compiler call or not.

Returns 'c' or 'c++' when it match. None otherwise. \end{DoxyVerb}
 

Definition at line 129 of file compilation.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{129 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}{compiler\_language}}(command):}
\DoxyCodeLine{130     \textcolor{stringliteral}{"{}"{}"{} A predicate to decide the command is a compiler call or not.}}
\DoxyCodeLine{131 \textcolor{stringliteral}{}}
\DoxyCodeLine{132 \textcolor{stringliteral}{    Returns 'c' or 'c++' when it match. None otherwise. "{}"{}"{}}}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     cplusplus = re.compile(\textcolor{stringliteral}{r'\string^(.+)(\(\backslash\)+\(\backslash\)+)(-\/.+|)\$'})}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{keywordflow}{if} command:}
\DoxyCodeLine{137         executable = os.path.basename(command[0])}
\DoxyCodeLine{138         \textcolor{keywordflow}{if} any(pattern.match(executable) \textcolor{keywordflow}{for} pattern \textcolor{keywordflow}{in} COMPILER\_PATTERNS):}
\DoxyCodeLine{139             \textcolor{keywordflow}{return} \textcolor{stringliteral}{'c++'} \textcolor{keywordflow}{if} cplusplus.match(executable) \textcolor{keywordflow}{else} \textcolor{stringliteral}{'c'}}
\DoxyCodeLine{140     \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}

\end{DoxyCode}


Referenced by libscanbuild.\+analyze.\+classify\+\_\+parameters(), and libscanbuild.\+compilation.\+split\+\_\+command().

\mbox{\Hypertarget{namespacelibscanbuild_1_1compilation_ae846942ed0e175486de0bbe3a258852c}\label{namespacelibscanbuild_1_1compilation_ae846942ed0e175486de0bbe3a258852c}} 
\index{libscanbuild.compilation@{libscanbuild.compilation}!split\_command@{split\_command}}
\index{split\_command@{split\_command}!libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsubsection{\texorpdfstring{split\_command()}{split\_command()}}
{\footnotesize\ttfamily def libscanbuild.\+compilation.\+split\+\_\+command (\begin{DoxyParamCaption}\item[{}]{command }\end{DoxyParamCaption})}

\begin{DoxyVerb} Returns a value when the command is a compilation, None otherwise.

The value on success is a named tuple with the following attributes:

    files:    list of source files
    flags:    list of compile options
    compiler: string value of 'c' or 'c++' \end{DoxyVerb}
 

Definition at line 59 of file compilation.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{59 \textcolor{keyword}{def }\mbox{\hyperlink{namespacelibscanbuild_1_1compilation_ae846942ed0e175486de0bbe3a258852c}{split\_command}}(command):}
\DoxyCodeLine{60     \textcolor{stringliteral}{"{}"{}"{} Returns a value when the command is a compilation, None otherwise.}}
\DoxyCodeLine{61 \textcolor{stringliteral}{}}
\DoxyCodeLine{62 \textcolor{stringliteral}{    The value on success is a named tuple with the following attributes:}}
\DoxyCodeLine{63 \textcolor{stringliteral}{}}
\DoxyCodeLine{64 \textcolor{stringliteral}{        files:    list of source files}}
\DoxyCodeLine{65 \textcolor{stringliteral}{        flags:    list of compile options}}
\DoxyCodeLine{66 \textcolor{stringliteral}{        compiler: string value of 'c' or 'c++' "{}"{}"{}}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{\# the result of this method}}
\DoxyCodeLine{69     result = collections.namedtuple(\textcolor{stringliteral}{'Compilation'},}
\DoxyCodeLine{70                                     [\textcolor{stringliteral}{'compiler'}, \textcolor{stringliteral}{'flags'}, \textcolor{stringliteral}{'files'}])}
\DoxyCodeLine{71     result.compiler = \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_aaf9b4f3ae02989aece8394338bfe1cc8}{compiler\_language}}(command)}
\DoxyCodeLine{72     result.flags = []}
\DoxyCodeLine{73     result.files = []}
\DoxyCodeLine{74     \textcolor{comment}{\# quit right now, if the program was not a C/C++ compiler}}
\DoxyCodeLine{75     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} result.compiler:}
\DoxyCodeLine{76         \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{77     \textcolor{comment}{\# iterate on the compile options}}
\DoxyCodeLine{78     args = iter(command[1:])}
\DoxyCodeLine{79     \textcolor{keywordflow}{for} arg \textcolor{keywordflow}{in} args:}
\DoxyCodeLine{80         \textcolor{comment}{\# quit when compilation pass is not involved}}
\DoxyCodeLine{81         \textcolor{keywordflow}{if} arg \textcolor{keywordflow}{in} \{\textcolor{stringliteral}{'-\/E'}, \textcolor{stringliteral}{'-\/S'}, \textcolor{stringliteral}{'-\/cc1'}, \textcolor{stringliteral}{'-\/M'}, \textcolor{stringliteral}{'-\/MM'}, \textcolor{stringliteral}{'-\/\#\#\#'}\}:}
\DoxyCodeLine{82             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}}
\DoxyCodeLine{83         \textcolor{comment}{\# ignore some flags}}
\DoxyCodeLine{84         \textcolor{keywordflow}{elif} arg \textcolor{keywordflow}{in} IGNORED\_FLAGS:}
\DoxyCodeLine{85             count = IGNORED\_FLAGS[arg]}
\DoxyCodeLine{86             \textcolor{keywordflow}{for} \_ \textcolor{keywordflow}{in} range(count):}
\DoxyCodeLine{87                 next(args)}
\DoxyCodeLine{88         \textcolor{keywordflow}{elif} re.match(\textcolor{stringliteral}{r'\string^-\/(l|L|Wl,).+'}, arg):}
\DoxyCodeLine{89             \textcolor{keywordflow}{pass}}
\DoxyCodeLine{90         \textcolor{comment}{\# some parameters could look like filename, take as compile option}}
\DoxyCodeLine{91         \textcolor{keywordflow}{elif} arg \textcolor{keywordflow}{in} \{\textcolor{stringliteral}{'-\/D'}, \textcolor{stringliteral}{'-\/I'}\}:}
\DoxyCodeLine{92             result.flags.extend([arg, next(args)])}
\DoxyCodeLine{93         \textcolor{comment}{\# parameter which looks source file is taken...}}
\DoxyCodeLine{94         \textcolor{keywordflow}{elif} re.match(\textcolor{stringliteral}{r'\string^[\string^-\/].+'}, arg) \textcolor{keywordflow}{and} \mbox{\hyperlink{namespacelibscanbuild_1_1compilation_af89617a2af7528cbc172d5a911af9e07}{classify\_source}}(arg):}
\DoxyCodeLine{95             result.files.append(arg)}
\DoxyCodeLine{96         \textcolor{comment}{\# and consider everything else as compile option.}}
\DoxyCodeLine{97         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{98             result.flags.append(arg)}
\DoxyCodeLine{99     \textcolor{comment}{\# do extra check on number of source files}}
\DoxyCodeLine{100     \textcolor{keywordflow}{return} result \textcolor{keywordflow}{if} result.files \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102 }

\end{DoxyCode}


References libscanbuild.\+compilation.\+classify\+\_\+source(), and libscanbuild.\+compilation.\+compiler\+\_\+language().



Referenced by libscanbuild.\+analyze.\+analyze\+\_\+compiler\+\_\+wrapper\+\_\+impl(), and libscanbuild.\+intercept.\+format\+\_\+entry().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacelibscanbuild_1_1compilation_a584c2b412eb55c0afaf8dec59bab45d0}\label{namespacelibscanbuild_1_1compilation_a584c2b412eb55c0afaf8dec59bab45d0}} 
\index{libscanbuild.compilation@{libscanbuild.compilation}!COMPILER\_PATTERNS@{COMPILER\_PATTERNS}}
\index{COMPILER\_PATTERNS@{COMPILER\_PATTERNS}!libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsubsection{\texorpdfstring{COMPILER\_PATTERNS}{COMPILER\_PATTERNS}}
{\footnotesize\ttfamily libscanbuild.\+compilation.\+COMPILER\+\_\+\+PATTERNS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  frozenset([}
\DoxyCodeLine{2     re.compile(\textcolor{stringliteral}{r'\string^(intercept-\/|analyze-\/|)c(c|\(\backslash\)+\(\backslash\)+)\$'}),}
\DoxyCodeLine{3     re.compile(\textcolor{stringliteral}{r'\string^([\string^-\/]*-\/)*[mg](cc|\(\backslash\)+\(\backslash\)+)(-\/\(\backslash\)d+(\(\backslash\).\(\backslash\)d+)\{0,2\})?\$'}),}
\DoxyCodeLine{4     re.compile(\textcolor{stringliteral}{r'\string^([\string^-\/]*-\/)*clang(\(\backslash\)+\(\backslash\)+)?(-\/\(\backslash\)d+(\(\backslash\).\(\backslash\)d+)\{0,2\})?\$'}),}
\DoxyCodeLine{5     re.compile(\textcolor{stringliteral}{r'\string^llvm-\/g(cc|\(\backslash\)+\(\backslash\)+)\$'}),}
\DoxyCodeLine{6 ])}

\end{DoxyCode}


Definition at line 51 of file compilation.\+py.

\mbox{\Hypertarget{namespacelibscanbuild_1_1compilation_a69b7030a86c612d8cabfe08cc5149c9f}\label{namespacelibscanbuild_1_1compilation_a69b7030a86c612d8cabfe08cc5149c9f}} 
\index{libscanbuild.compilation@{libscanbuild.compilation}!IGNORED\_FLAGS@{IGNORED\_FLAGS}}
\index{IGNORED\_FLAGS@{IGNORED\_FLAGS}!libscanbuild.compilation@{libscanbuild.compilation}}
\doxysubsubsection{\texorpdfstring{IGNORED\_FLAGS}{IGNORED\_FLAGS}}
{\footnotesize\ttfamily dictionary libscanbuild.\+compilation.\+IGNORED\+\_\+\+FLAGS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  \{}
\DoxyCodeLine{2     \textcolor{comment}{\# compiling only flag, ignored because the creator of compilation}}
\DoxyCodeLine{3     \textcolor{comment}{\# database will explicitly set it.}}
\DoxyCodeLine{4     \textcolor{stringliteral}{'-\/c'}: 0,}
\DoxyCodeLine{5     \textcolor{comment}{\# preprocessor macros, ignored because would cause duplicate entries in}}
\DoxyCodeLine{6     \textcolor{comment}{\# the output (the only difference would be these flags). this is actual}}
\DoxyCodeLine{7     \textcolor{comment}{\# finding from users, who suffered longer execution time caused by the}}
\DoxyCodeLine{8     \textcolor{comment}{\# duplicates.}}
\DoxyCodeLine{9     \textcolor{stringliteral}{'-\/MD'}: 0,}
\DoxyCodeLine{10     \textcolor{stringliteral}{'-\/MMD'}: 0,}
\DoxyCodeLine{11     \textcolor{stringliteral}{'-\/MG'}: 0,}
\DoxyCodeLine{12     \textcolor{stringliteral}{'-\/MP'}: 0,}
\DoxyCodeLine{13     \textcolor{stringliteral}{'-\/MF'}: 1,}
\DoxyCodeLine{14     \textcolor{stringliteral}{'-\/MT'}: 1,}
\DoxyCodeLine{15     \textcolor{stringliteral}{'-\/MQ'}: 1,}
\DoxyCodeLine{16     \textcolor{comment}{\# linker options, ignored because for compilation database will contain}}
\DoxyCodeLine{17     \textcolor{comment}{\# compilation commands only. so, the compiler would ignore these flags}}
\DoxyCodeLine{18     \textcolor{comment}{\# anyway. the benefit to get rid of them is to make the output more}}
\DoxyCodeLine{19     \textcolor{comment}{\# readable.}}
\DoxyCodeLine{20     \textcolor{stringliteral}{'-\/static'}: 0,}
\DoxyCodeLine{21     \textcolor{stringliteral}{'-\/shared'}: 0,}
\DoxyCodeLine{22     \textcolor{stringliteral}{'-\/s'}: 0,}
\DoxyCodeLine{23     \textcolor{stringliteral}{'-\/rdynamic'}: 0,}
\DoxyCodeLine{24     \textcolor{stringliteral}{'-\/l'}: 1,}
\DoxyCodeLine{25     \textcolor{stringliteral}{'-\/L'}: 1,}
\DoxyCodeLine{26     \textcolor{stringliteral}{'-\/u'}: 1,}
\DoxyCodeLine{27     \textcolor{stringliteral}{'-\/z'}: 1,}
\DoxyCodeLine{28     \textcolor{stringliteral}{'-\/T'}: 1,}
\DoxyCodeLine{29     \textcolor{stringliteral}{'-\/Xlinker'}: 1}
\DoxyCodeLine{30 \}}

\end{DoxyCode}


Definition at line 19 of file compilation.\+py.

