\hypertarget{cc1as__main_8cpp}{}\doxysection{/\+Users/maximilian/clang-\/llvm/clang/tools/driver/cc1as\+\_\+main.cpp File Reference}
\label{cc1as__main_8cpp}\index{/Users/maximilian/clang-\/llvm/clang/tools/driver/cc1as\_main.cpp@{/Users/maximilian/clang-\/llvm/clang/tools/driver/cc1as\_main.cpp}}
{\ttfamily \#include \char`\"{}clang/\+Basic/\+Diagnostic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Basic/\+Diagnostic\+Options.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Driver/\+Driver\+Diagnostic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Driver/\+Options.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Frontend/\+Frontend\+Diagnostic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Frontend/\+Text\+Diagnostic\+Printer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}clang/\+Frontend/\+Utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+ADT/\+STLExtras.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+ADT/\+String\+Switch.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+ADT/\+Triple.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+IR/\+Data\+Layout.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCAsm\+Backend.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCAsm\+Info.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCCode\+Emitter.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCContext.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCInstr\+Info.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCObject\+File\+Info.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCObject\+Writer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCParser/\+MCAsm\+Parser.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCParser/\+MCTarget\+Asm\+Parser.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCRegister\+Info.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCSection\+Mach\+O.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCStreamer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCSubtarget\+Info.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+MC/\+MCTarget\+Options.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Option/\+Arg.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Option/\+Arg\+List.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Option/\+Opt\+Table.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Command\+Line.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Error\+Handling.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+File\+System.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Formatted\+Stream.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Host.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Memory\+Buffer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Path.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Process.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Signals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Source\+Mgr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Target\+Registry.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Target\+Select.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/\+Timer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}llvm/\+Support/raw\+\_\+ostream.\+h\char`\"{}}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$system\+\_\+error$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{cc1as__main_8cpp_ac7d9c4a59e9773f938ddff75f14b90a6}{cc1as\+\_\+main}} (Array\+Ref$<$ const char $\ast$ $>$ Argv, const char $\ast$Argv0, void $\ast$Main\+Addr)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{cc1as__main_8cpp_ac7d9c4a59e9773f938ddff75f14b90a6}\label{cc1as__main_8cpp_ac7d9c4a59e9773f938ddff75f14b90a6}} 
\index{cc1as\_main.cpp@{cc1as\_main.cpp}!cc1as\_main@{cc1as\_main}}
\index{cc1as\_main@{cc1as\_main}!cc1as\_main.cpp@{cc1as\_main.cpp}}
\doxysubsubsection{\texorpdfstring{cc1as\_main()}{cc1as\_main()}}
{\footnotesize\ttfamily int cc1as\+\_\+main (\begin{DoxyParamCaption}\item[{Array\+Ref$<$ const char $\ast$ $>$}]{Argv,  }\item[{const char $\ast$}]{Argv0,  }\item[{void $\ast$}]{Main\+Addr }\end{DoxyParamCaption})}



Definition at line 563 of file cc1as\+\_\+main.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{563                                                                                \{}
\DoxyCodeLine{564   \textcolor{comment}{// Initialize targets and assembly printers/parsers.}}
\DoxyCodeLine{565   InitializeAllTargetInfos();}
\DoxyCodeLine{566   InitializeAllTargetMCs();}
\DoxyCodeLine{567   InitializeAllAsmParsers();}
\DoxyCodeLine{568 }
\DoxyCodeLine{569   \textcolor{comment}{// Construct our diagnostic client.}}
\DoxyCodeLine{570   IntrusiveRefCntPtr<DiagnosticOptions> DiagOpts = \textcolor{keyword}{new} DiagnosticOptions();}
\DoxyCodeLine{571   TextDiagnosticPrinter *DiagClient}
\DoxyCodeLine{572     = \textcolor{keyword}{new} TextDiagnosticPrinter(errs(), \&*DiagOpts);}
\DoxyCodeLine{573   DiagClient-\/>setPrefix(\textcolor{stringliteral}{"{}clang -\/cc1as"{}});}
\DoxyCodeLine{574   IntrusiveRefCntPtr<DiagnosticIDs> DiagID(\textcolor{keyword}{new} DiagnosticIDs());}
\DoxyCodeLine{575   DiagnosticsEngine Diags(DiagID, \&*DiagOpts, DiagClient);}
\DoxyCodeLine{576 }
\DoxyCodeLine{577   \textcolor{comment}{// Set an error handler, so that any LLVM backend diagnostics go through our}}
\DoxyCodeLine{578   \textcolor{comment}{// error handler.}}
\DoxyCodeLine{579   ScopedFatalErrorHandler FatalErrorHandler}
\DoxyCodeLine{580     (LLVMErrorHandler, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&Diags));}
\DoxyCodeLine{581 }
\DoxyCodeLine{582   \textcolor{comment}{// Parse the arguments.}}
\DoxyCodeLine{583   AssemblerInvocation Asm;}
\DoxyCodeLine{584   \textcolor{keywordflow}{if} (!AssemblerInvocation::CreateFromArgs(Asm, Argv, Diags))}
\DoxyCodeLine{585     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{586 }
\DoxyCodeLine{587   \textcolor{keywordflow}{if} (Asm.ShowHelp) \{}
\DoxyCodeLine{588     getDriverOptTable().printHelp(}
\DoxyCodeLine{589         llvm::outs(), \textcolor{stringliteral}{"{}clang -\/cc1as [options] file..."{}},}
\DoxyCodeLine{590         \textcolor{stringliteral}{"{}Clang Integrated Assembler"{}},}
\DoxyCodeLine{591         \textcolor{comment}{/*Include=*/}driver::options::CC1AsOption, \textcolor{comment}{/*Exclude=*/}0,}
\DoxyCodeLine{592         \textcolor{comment}{/*ShowAllAliases=*/}\textcolor{keyword}{false});}
\DoxyCodeLine{593     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{594   \}}
\DoxyCodeLine{595 }
\DoxyCodeLine{596   \textcolor{comment}{// Honor -\/version.}}
\DoxyCodeLine{597   \textcolor{comment}{//}}
\DoxyCodeLine{598   \textcolor{comment}{// FIXME: Use a better -\/version message?}}
\DoxyCodeLine{599   \textcolor{keywordflow}{if} (Asm.ShowVersion) \{}
\DoxyCodeLine{600     llvm::cl::PrintVersionMessage();}
\DoxyCodeLine{601     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{602   \}}
\DoxyCodeLine{603 }
\DoxyCodeLine{604   \textcolor{comment}{// Honor -\/mllvm.}}
\DoxyCodeLine{605   \textcolor{comment}{//}}
\DoxyCodeLine{606   \textcolor{comment}{// FIXME: Remove this, one day.}}
\DoxyCodeLine{607   \textcolor{keywordflow}{if} (!Asm.LLVMArgs.empty()) \{}
\DoxyCodeLine{608     \textcolor{keywordtype}{unsigned} NumArgs = Asm.LLVMArgs.size();}
\DoxyCodeLine{609     \textcolor{keyword}{auto} Args = std::make\_unique<const char*[]>(NumArgs + 2);}
\DoxyCodeLine{610     Args[0] = \textcolor{stringliteral}{"{}clang (LLVM option parsing)"{}};}
\DoxyCodeLine{611     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i != NumArgs; ++i)}
\DoxyCodeLine{612       Args[i + 1] = Asm.LLVMArgs[i].c\_str();}
\DoxyCodeLine{613     Args[NumArgs + 1] = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{614     llvm::cl::ParseCommandLineOptions(NumArgs + 1, Args.get());}
\DoxyCodeLine{615   \}}
\DoxyCodeLine{616 }
\DoxyCodeLine{617   \textcolor{comment}{// Execute the invocation, unless there were parsing errors.}}
\DoxyCodeLine{618   \textcolor{keywordtype}{bool} Failed = Diags.hasErrorOccurred() || ExecuteAssembler(Asm, Diags);}
\DoxyCodeLine{619 }
\DoxyCodeLine{620   \textcolor{comment}{// If any timers were active but haven't been destroyed yet, print their}}
\DoxyCodeLine{621   \textcolor{comment}{// results now.}}
\DoxyCodeLine{622   TimerGroup::printAll(errs());}
\DoxyCodeLine{623   TimerGroup::clearAll();}
\DoxyCodeLine{624 }
\DoxyCodeLine{625   \textcolor{keywordflow}{return} !!Failed;}
\DoxyCodeLine{626 \}}

\end{DoxyCode}
